{"version":3,"file":"react-share-components.esm.js","sources":["../src/ReactShareComponents.tsx"],"sourcesContent":["import * as React from 'react';\nimport QRCode, { SvgQRCodeProps, CanvasQRCodeProps } from 'qrcode.react';\nimport './reactShareComponents.scss';\n\nexport declare const TShareSites: [\n  'weibo',\n  'qq',\n  'wechat',\n  'douban',\n  'qzone',\n  'linkedin',\n  'facebook',\n  'twitter',\n  'google'\n];\nexport type ShareSitesTypes = typeof TShareSites[number];\nexport type ShareSitesTypesGroup = ShareSitesTypes[];\nexport interface ShareProps {\n  url: string;\n  title: string;\n  description: string;\n  source: string;\n  summary: string;\n  image: string;\n  sites: ShareSitesTypesGroup;\n  disabled: ShareSitesTypesGroup;\n  origin: string;\n  weiboKey: string;\n  wechatQrcodeTitle: React.ReactNode;\n  wechatQrcodeHelper: React.ReactNode;\n  wechatQrcodeProps?: Partial<CanvasQRCodeProps | SvgQRCodeProps>;\n  className: string;\n  style: React.CSSProperties;\n}\n\nexport type ReactShareComponentsProps = Partial<ShareProps>;\n\nfunction getMetaContentByName(name) {\n  return ((document.getElementsByName(name)[0] || 0) as HTMLMetaElement)\n    .content;\n}\n\nconst getDefaultProps = (): ShareProps => {\n  const { href: url, origin } = window.location;\n  const image = (document.images[0] || 0).src || '';\n  const title =\n    getMetaContentByName('title') ||\n    getMetaContentByName('Title') ||\n    document.title;\n  const description =\n    getMetaContentByName('description') ||\n    getMetaContentByName('Description') ||\n    '';\n  const site =\n    getMetaContentByName('site') ||\n    getMetaContentByName('Site') ||\n    document.title;\n  const sites: ShareSitesTypesGroup = [\n    'weibo',\n    'qq',\n    'wechat',\n    'douban',\n    'qzone',\n    'linkedin',\n    'facebook',\n    'twitter',\n    'google',\n  ];\n  return {\n    url,\n    origin,\n    title,\n    image,\n    description,\n    summary: description,\n    sites,\n    source: site,\n    disabled: [],\n    weiboKey: '',\n    wechatQrcodeTitle: '微信扫一扫：分享',\n    wechatQrcodeHelper: (\n      <>\n        <p>微信里点“发现”，扫一下</p>\n        <p>二维码便可将本文分享至朋友圈。</p>\n      </>\n    ),\n    wechatQrcodeProps: {\n      size: 100,\n    },\n    className: '',\n    style: {},\n  };\n};\n\nconst qsStringify = obj => {\n  return Object.keys(obj).reduce((res, field, key) => {\n    return (res += `${key ? '&' : '?'}${field}=${obj[field]}`);\n  }, '');\n};\n\nconst encodeNames = [\n  'url',\n  'title',\n  'description',\n  'image',\n  'site',\n  'origin',\n  'origin',\n];\n\nconst encodeOptions = (options: ShareProps) => {\n  const data = encodeNames.reduce((res, name) => {\n    return {\n      ...res,\n      [name]: encodeURIComponent(options[name]),\n    };\n  }, {});\n  return {\n    ...options,\n    ...data,\n  };\n};\n\nconst filterSites = (\n  sites: ShareSitesTypesGroup,\n  exclude: ShareSitesTypesGroup\n) => sites.filter(item => !exclude.includes(item));\n\nconst ReactShareComponents: React.FC<ShareProps> = ({ children, ...rest }) => {\n  const {\n    title,\n    description,\n    image,\n    source,\n    origin,\n    url,\n    sites = [],\n    summary,\n    disabled,\n    weiboKey,\n    wechatQrcodeTitle,\n    wechatQrcodeHelper,\n    wechatQrcodeProps = {},\n    className,\n    style,\n  } = encodeOptions(rest);\n\n  const templates = {\n    qzone: `http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey${qsStringify(\n      {\n        url,\n        title,\n        desc: description,\n        summary,\n        site: source,\n        pics: image,\n      }\n    )}`,\n    qq: `http://connect.qq.com/widget/shareqq/index.html${qsStringify({\n      url,\n      title,\n      source,\n      desc: description,\n      pics: image,\n      summary,\n    })}`,\n    weibo: `https://service.weibo.com/share/share.php${qsStringify({\n      url,\n      title,\n      pic: image,\n      appkey: weiboKey,\n    })}`,\n    wechat: 'javascript:;',\n    douban: `http://shuo.douban.com/!service/share${qsStringify({\n      href: url,\n      name: title,\n      text: description,\n      image,\n      starid: 0,\n      aid: 0,\n      style: 11,\n    })}`,\n    linkedin: `http://www.linkedin.com/shareArticle${qsStringify({\n      mini: true,\n      ro: true,\n      title,\n      url,\n      summary,\n      source,\n      armin: 'armin',\n    })}`,\n    facebook: `https://www.facebook.com/sharer/sharer.php${qsStringify({\n      u: url,\n    })}`,\n    twitter: `https://twitter.com/intent/tweet${qsStringify({\n      text: title,\n      url,\n      via: origin,\n    })}`,\n    google: `https://plus.google.com/share${qsStringify({\n      url,\n    })}`,\n  };\n  return (\n    <div\n      className={`social-share${className ? ` ${className}` : ''}`}\n      style={style}\n    >\n      {filterSites(sites, disabled).map((site, i) => {\n        const isWechat = Object.is(site, 'wechat');\n        return (\n          <a\n            key={i}\n            className={`icon-${site} social-share-icon`}\n            href={isWechat ? '#' : templates[site]}\n            {...(isWechat\n              ? {\n                  onClick: e => e.preventDefault(),\n                }\n              : {\n                  target: '_blank',\n                })}\n          >\n            {isWechat && (\n              <div className=\"wechat-qrcode\">\n                <h4>{wechatQrcodeTitle}</h4>\n                <div className=\"qrcode\">\n                  <QRCode\n                    style={{ verticalAlign: 'middle' }}\n                    value={url}\n                    {...(wechatQrcodeProps as any)}\n                  />\n                </div>\n                <div className=\"help\">{wechatQrcodeHelper}</div>\n              </div>\n            )}\n          </a>\n        );\n      })}\n      {children}\n    </div>\n  );\n};\n\nReactShareComponents.defaultProps = getDefaultProps();\n\nexport default ReactShareComponents as React.FC<ReactShareComponentsProps>;\n"],"names":["getMetaContentByName","name","document","getElementsByName","content","getDefaultProps","window","location","url","href","origin","image","images","src","title","description","site","sites","summary","source","disabled","weiboKey","wechatQrcodeTitle","wechatQrcodeHelper","React","wechatQrcodeProps","size","className","style","qsStringify","obj","Object","keys","reduce","res","field","key","encodeNames","encodeOptions","options","data","encodeURIComponent","filterSites","exclude","filter","item","includes","ReactShareComponents","children","rest","templates","qzone","desc","pics","qq","weibo","pic","appkey","wechat","douban","text","starid","aid","linkedin","mini","ro","armin","facebook","u","twitter","via","google","map","i","isWechat","is","onClick","e","preventDefault","target","QRCode","verticalAlign","value","defaultProps"],"mappings":"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"}