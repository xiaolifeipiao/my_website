{"version":3,"file":"react-share-components.cjs.production.min.js","sources":["../src/ReactShareComponents.tsx"],"sourcesContent":["import * as React from 'react';\nimport QRCode, { SvgQRCodeProps, CanvasQRCodeProps } from 'qrcode.react';\nimport './reactShareComponents.scss';\n\nexport declare const TShareSites: [\n  'weibo',\n  'qq',\n  'wechat',\n  'douban',\n  'qzone',\n  'linkedin',\n  'facebook',\n  'twitter',\n  'google'\n];\nexport type ShareSitesTypes = typeof TShareSites[number];\nexport type ShareSitesTypesGroup = ShareSitesTypes[];\nexport interface ShareProps {\n  url: string;\n  title: string;\n  description: string;\n  source: string;\n  summary: string;\n  image: string;\n  sites: ShareSitesTypesGroup;\n  disabled: ShareSitesTypesGroup;\n  origin: string;\n  weiboKey: string;\n  wechatQrcodeTitle: React.ReactNode;\n  wechatQrcodeHelper: React.ReactNode;\n  wechatQrcodeProps?: Partial<CanvasQRCodeProps | SvgQRCodeProps>;\n  className: string;\n  style: React.CSSProperties;\n}\n\nexport type ReactShareComponentsProps = Partial<ShareProps>;\n\nfunction getMetaContentByName(name) {\n  return ((document.getElementsByName(name)[0] || 0) as HTMLMetaElement)\n    .content;\n}\n\nconst getDefaultProps = (): ShareProps => {\n  const { href: url, origin } = window.location;\n  const image = (document.images[0] || 0).src || '';\n  const title =\n    getMetaContentByName('title') ||\n    getMetaContentByName('Title') ||\n    document.title;\n  const description =\n    getMetaContentByName('description') ||\n    getMetaContentByName('Description') ||\n    '';\n  const site =\n    getMetaContentByName('site') ||\n    getMetaContentByName('Site') ||\n    document.title;\n  const sites: ShareSitesTypesGroup = [\n    'weibo',\n    'qq',\n    'wechat',\n    'douban',\n    'qzone',\n    'linkedin',\n    'facebook',\n    'twitter',\n    'google',\n  ];\n  return {\n    url,\n    origin,\n    title,\n    image,\n    description,\n    summary: description,\n    sites,\n    source: site,\n    disabled: [],\n    weiboKey: '',\n    wechatQrcodeTitle: '微信扫一扫：分享',\n    wechatQrcodeHelper: (\n      <>\n        <p>微信里点“发现”，扫一下</p>\n        <p>二维码便可将本文分享至朋友圈。</p>\n      </>\n    ),\n    wechatQrcodeProps: {\n      size: 100,\n    },\n    className: '',\n    style: {},\n  };\n};\n\nconst qsStringify = obj => {\n  return Object.keys(obj).reduce((res, field, key) => {\n    return (res += `${key ? '&' : '?'}${field}=${obj[field]}`);\n  }, '');\n};\n\nconst encodeNames = [\n  'url',\n  'title',\n  'description',\n  'image',\n  'site',\n  'origin',\n  'origin',\n];\n\nconst encodeOptions = (options: ShareProps) => {\n  const data = encodeNames.reduce((res, name) => {\n    return {\n      ...res,\n      [name]: encodeURIComponent(options[name]),\n    };\n  }, {});\n  return {\n    ...options,\n    ...data,\n  };\n};\n\nconst filterSites = (\n  sites: ShareSitesTypesGroup,\n  exclude: ShareSitesTypesGroup\n) => sites.filter(item => !exclude.includes(item));\n\nconst ReactShareComponents: React.FC<ShareProps> = ({ children, ...rest }) => {\n  const {\n    title,\n    description,\n    image,\n    source,\n    origin,\n    url,\n    sites = [],\n    summary,\n    disabled,\n    weiboKey,\n    wechatQrcodeTitle,\n    wechatQrcodeHelper,\n    wechatQrcodeProps = {},\n    className,\n    style,\n  } = encodeOptions(rest);\n\n  const templates = {\n    qzone: `http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey${qsStringify(\n      {\n        url,\n        title,\n        desc: description,\n        summary,\n        site: source,\n        pics: image,\n      }\n    )}`,\n    qq: `http://connect.qq.com/widget/shareqq/index.html${qsStringify({\n      url,\n      title,\n      source,\n      desc: description,\n      pics: image,\n      summary,\n    })}`,\n    weibo: `https://service.weibo.com/share/share.php${qsStringify({\n      url,\n      title,\n      pic: image,\n      appkey: weiboKey,\n    })}`,\n    wechat: 'javascript:;',\n    douban: `http://shuo.douban.com/!service/share${qsStringify({\n      href: url,\n      name: title,\n      text: description,\n      image,\n      starid: 0,\n      aid: 0,\n      style: 11,\n    })}`,\n    linkedin: `http://www.linkedin.com/shareArticle${qsStringify({\n      mini: true,\n      ro: true,\n      title,\n      url,\n      summary,\n      source,\n      armin: 'armin',\n    })}`,\n    facebook: `https://www.facebook.com/sharer/sharer.php${qsStringify({\n      u: url,\n    })}`,\n    twitter: `https://twitter.com/intent/tweet${qsStringify({\n      text: title,\n      url,\n      via: origin,\n    })}`,\n    google: `https://plus.google.com/share${qsStringify({\n      url,\n    })}`,\n  };\n  return (\n    <div\n      className={`social-share${className ? ` ${className}` : ''}`}\n      style={style}\n    >\n      {filterSites(sites, disabled).map((site, i) => {\n        const isWechat = Object.is(site, 'wechat');\n        return (\n          <a\n            key={i}\n            className={`icon-${site} social-share-icon`}\n            href={isWechat ? '#' : templates[site]}\n            {...(isWechat\n              ? {\n                  onClick: e => e.preventDefault(),\n                }\n              : {\n                  target: '_blank',\n                })}\n          >\n            {isWechat && (\n              <div className=\"wechat-qrcode\">\n                <h4>{wechatQrcodeTitle}</h4>\n                <div className=\"qrcode\">\n                  <QRCode\n                    style={{ verticalAlign: 'middle' }}\n                    value={url}\n                    {...(wechatQrcodeProps as any)}\n                  />\n                </div>\n                <div className=\"help\">{wechatQrcodeHelper}</div>\n              </div>\n            )}\n          </a>\n        );\n      })}\n      {children}\n    </div>\n  );\n};\n\nReactShareComponents.defaultProps = getDefaultProps();\n\nexport default ReactShareComponents as React.FC<ReactShareComponentsProps>;\n"],"names":["getMetaContentByName","name","document","getElementsByName","content","qsStringify","obj","Object","keys","reduce","res","field","key","encodeNames","ReactShareComponents","options","data","children","rest","encodeURIComponent","title","description","image","source","origin","url","sites","summary","disabled","weiboKey","wechatQrcodeTitle","wechatQrcodeHelper","wechatQrcodeProps","className","style","templates","qzone","desc","site","pics","qq","weibo","pic","appkey","wechat","douban","href","text","starid","aid","linkedin","mini","ro","armin","facebook","u","twitter","via","google","React","exclude","filter","item","includes","filterSites","map","i","isWechat","is","onClick","e","preventDefault","target","QRCode","verticalAlign","value","defaultProps","window","location","images","src","size","getDefaultProps"],"mappings":"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"}