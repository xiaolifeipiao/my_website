{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\19215\\\\Desktop\\\\liuguanhua.github.io-master\\\\liuguanhua.github.io\\\\src\\\\components\\\\layout\\\\Sidebar.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useState, useEffect, useRef, useContext, useCallback } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport Router from 'next/router';\nimport classNames from 'classnames';\nimport { debounce } from 'throttle-debounce';\nimport { isString, isBoolean, isUndefined } from 'util';\nimport styles from '@styles/sass/frame/menus.module.scss';\nimport { isSmallScreen } from '@scripts/helper';\nimport { APP_CONFIG, THEME_COLOR_LIST, DEFAULT_THEME_COLOR, BACKGROUND_COLOR_LIST, DEFAULT_BACKGROUND_COLOR, DEFAULT_DARK_COLOR, DEFAULT_LOVEEYE_COLOR } from '@scripts/constant';\nimport { globalSelf, generateNumList, setStorage, getStorage } from '@scripts/utils';\nimport { CtxStore } from '../context';\nimport Menubar from './Menubar';\nimport { SvgIcon, Switch } from '../common';\nimport { ReactComponent as SvgCheck } from '@fonts/svg/menu/check.svg';\nimport { ReactComponent as SvgSetting } from '@fonts/svg/merge/setting.svg';\nimport { ReactComponent as SvgClose } from '@fonts/svg/shared/close.svg';\nimport { useIsVisible } from '../hooks';\nconst {\n  side_wrapper,\n  logo,\n  theme_wrapper,\n  head_menu\n} = styles;\nconst {\n  name,\n  logo: logoPic\n} = globalSelf.g_config;\nconst themeNums = generateNumList(5);\nconst toggleBtnNums = generateNumList(3);\n\nconst mediaScheme = () => window.matchMedia('(prefers-color-scheme: dark)');\n\nconst SideLogo = () => {\n  return __jsx(Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, __jsx(\"a\", {\n    className: `tac pos-rel block ${logo}`,\n    title: name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"round bdr-half\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, __jsx(\"i\", {\n    className: \"icon-circle pos-abs t-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  })), __jsx(\"h2\", {\n    className: \"pos-abs r-m-p color-white bg-color-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, __jsx(\"span\", {\n    className: \"vam\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, \"\\u524D\\u7AEF\", __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }), \"\\u4E00\\u679A\")), __jsx(\"img\", {\n    className: \"pos-abs vam\",\n    src: logoPic,\n    alt: name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  })));\n};\n\nconst BackgroundOrColorTheme = () => {\n  const {\n    0: isFollowSystem,\n    1: setIsFollowSystem\n  } = useState(false);\n  const keepData = useRef({\n    isFollowSystem\n  });\n  const {\n    0: activeKey,\n    1: setActiveKey\n  } = useState();\n  const {\n    0: currentColor,\n    1: setCurrentColor\n  } = useState(DEFAULT_THEME_COLOR);\n  const {\n    dispatch\n  } = useContext(CtxStore);\n  const [, ...rest] = BACKGROUND_COLOR_LIST;\n\n  const onSwitchTheme = ({\n    backgroundKey,\n    isColor = true,\n    isMemory = true,\n    isEqualReturn = true\n  }) => {\n    if (isUndefined(backgroundKey)) return;\n\n    try {\n      const isEqual = isEqualReturn && Object.is(activeKey, backgroundKey);\n      const [isDefaultColor, isDarkColor, isLoveEyeColor] = isColor && !isEqual ? [Object.is(DEFAULT_BACKGROUND_COLOR, backgroundKey), rest.includes(backgroundKey), Object.is(backgroundKey, DEFAULT_LOVEEYE_COLOR)] : [];\n      const isEmpty = isEqual || isDefaultColor;\n      const bodyStyle = isEmpty ? {} : {\n        background: isColor ? backgroundKey : `url(${require(`@images/icons/icon-bg${backgroundKey}.png`)})`\n      };\n      const docStyle = document.documentElement.style;\n      docStyle.setProperty('--color-default-gray', isLoveEyeColor ? DEFAULT_DARK_COLOR : isDarkColor ? '#fff' : '#aaa');\n      docStyle.setProperty('--color-lighten-gray', isLoveEyeColor ? '#d2d2d2' : isDarkColor ? '#676767' : '#dadada');\n      setActiveKey(isEqual ? void 0 : backgroundKey);\n      isMemory && setStorage(APP_CONFIG, {\n        backgroundKey: isEmpty ? void 0 : backgroundKey\n      });\n      dispatch({\n        type: 'global',\n        payload: {\n          bodyStyle\n        }\n      });\n    } catch (error) {\n      console.warn(`引入背景图片失败`);\n    }\n  };\n\n  const onSwitchColor = color => {\n    if (Object.is(currentColor, color)) return;\n    const docStyle = document.documentElement.style;\n    docStyle.setProperty('--color-primary', color);\n    setCurrentColor(color);\n    setStorage(APP_CONFIG, {\n      themeColor: color\n    });\n  };\n\n  const onCustomColorChange = useCallback(debounce(1000, onSwitchColor), []);\n\n  const setThemeBackground = () => {\n    const {\n      backgroundKey\n    } = getStorage(APP_CONFIG);\n    onSwitchTheme({\n      backgroundKey,\n      isColor: isString(backgroundKey) && backgroundKey.includes('#'),\n      isEqualReturn: false\n    });\n  };\n\n  const handleSwitchTheme = e => {\n    if (!keepData.current.isFollowSystem) return;\n    const isDarkMode = e ? e.matches : mediaScheme().matches;\n\n    if (isDarkMode) {\n      return onSwitchTheme({\n        backgroundKey: DEFAULT_DARK_COLOR,\n        isMemory: false,\n        isEqualReturn: false\n      });\n    }\n\n    return onSwitchTheme({\n      backgroundKey: DEFAULT_BACKGROUND_COLOR,\n      isMemory: false\n    });\n  };\n\n  const changeIsFollowSystem = isOpen => {\n    setIsFollowSystem(isOpen);\n    keepData.current.isFollowSystem = isOpen;\n  };\n\n  const onFollowSystem = checked => {\n    setStorage(APP_CONFIG, {\n      isFollowSystem: checked\n    });\n    changeIsFollowSystem(checked);\n    checked ? handleSwitchTheme() : setThemeBackground();\n  };\n\n  useEffect(() => {\n    const {\n      themeColor,\n      isFollowSystem: storeIsFollowSystem\n    } = getStorage(APP_CONFIG);\n    themeColor && onSwitchColor(themeColor);\n\n    if (isBoolean(storeIsFollowSystem) && storeIsFollowSystem) {\n      changeIsFollowSystem(true);\n      return handleSwitchTheme();\n    }\n\n    setThemeBackground();\n  }, []);\n  useEffect(() => {\n    const media = mediaScheme();\n    media.addListener ? media.addListener(handleSwitchTheme) : media.addEventListener('change', handleSwitchTheme);\n    return () => {\n      ;\n      (media.removeListener || media.removeListener)(handleSwitchTheme);\n    };\n  }, []);\n  return __jsx(\"section\", {\n    className: `${theme_wrapper} tac p-b-xl`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 5\n    }\n  }, __jsx(\"h4\", {\n    className: \"font-weight-normal r-m-p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }, \"\\u80CC\\u666F\"), __jsx(\"div\", {\n    className: \"m-t-xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }\n  }, BACKGROUND_COLOR_LIST.map(color => {\n    return __jsx(\"button\", {\n      className: classNames('pos-rel', {\n        active: !isFollowSystem && Object.is(activeKey, color)\n      }),\n      disabled: isFollowSystem,\n      style: {\n        width: 42,\n        height: 32,\n        backgroundColor: color\n      },\n      onClick: () => onSwitchTheme({\n        backgroundKey: color\n      }),\n      key: color,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    }, __jsx(SvgIcon, {\n      className: \"pos-abs tblr-0 m-auto hide color-primary\",\n      component: SvgCheck,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 15\n      }\n    }));\n  }), themeNums.slice(-(themeNums.length - 2)).map(item => {\n    const index = ++item;\n    return __jsx(\"button\", _extends({\n      className: classNames('pos-rel', {\n        active: !isFollowSystem && Object.is(activeKey, index)\n      }),\n      disabled: isFollowSystem\n    }, activeKey && {\n      style: {\n        boxShadow: '0px 0px 5px var(--color-lighten-gray)'\n      }\n    }, {\n      onClick: () => onSwitchTheme({\n        backgroundKey: index,\n        isColor: false\n      }),\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }\n    }), __jsx(\"i\", {\n      className: `icon-bg${index}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 15\n      }\n    }), __jsx(SvgIcon, {\n      className: \"pos-abs tblr-0 m-auto hide color-primary\",\n      component: SvgCheck,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 15\n      }\n    }));\n  }), __jsx(\"h4\", {\n    className: \"font-weight-normal r-m-p m-t-b-xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }\n  }, \"\\u8DDF\\u968F\\u7CFB\\u7EDF:\", __jsx(\"span\", {\n    className: \"m-l-xxs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 11\n    }\n  }, __jsx(Switch, {\n    checked: isFollowSystem,\n    checkedChildren: \"\\u5F00\",\n    uncheckedChildren: \"\\u5173\",\n    onChange: onFollowSystem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 13\n    }\n  })))), __jsx(\"h4\", {\n    className: \"font-weight-normal r-m-p m-b-xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }\n  }, \"\\u989C\\u8272\"), THEME_COLOR_LIST.map((color, index) => {\n    const isLast = Object.is(THEME_COLOR_LIST.length - 1, index);\n    return __jsx(\"button\", _extends({\n      className: classNames('pos-rel', {\n        active: Object.is(currentColor, color)\n      }),\n      style: {\n        width: 42,\n        height: 32,\n        backgroundColor: color\n      }\n    }, !isLast && {\n      onClick: () => onSwitchColor(color)\n    }, {\n      key: color,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 11\n      }\n    }), __jsx(SvgIcon, {\n      className: \"pos-abs tblr-0 m-auto hide color-white\",\n      component: SvgCheck,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 13\n      }\n    }), isLast && __jsx(React.Fragment, null, __jsx(\"input\", {\n      className: \"input-custom-color pos-abs tblr-0 w-h-100 cursign\",\n      onChange: ({\n        target: {\n          value\n        }\n      }) => onCustomColorChange(value),\n      type: \"color\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 17\n      }\n    }), __jsx(\"span\", {\n      className: \"font-size-xs color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }\n    }, \"\\u81EA\\u5B9A\\u4E49\")));\n  }));\n};\n\nconst Sidebar = () => {\n  const {\n    store\n  } = useContext(CtxStore);\n  const {\n    bodyStyle\n  } = store;\n  const keepData = useRef({\n    pathname: ''\n  });\n  const {\n    pathname\n  } = useRouter();\n  const {\n    0: toogle,\n    1: setToogle\n  } = useState(false);\n  const {\n    isShow,\n    toggleContent\n  } = useIsVisible();\n  useEffect(() => {\n    if (!isSmallScreen()) return;\n\n    const handleRouteChange = url => {\n      const {\n        pathname\n      } = keepData.current;\n\n      if (!Object.is(url, pathname)) {\n        setToogle(false);\n      }\n    };\n\n    const {\n      events\n    } = Router;\n    events.on('routeChangeStart', handleRouteChange);\n    return () => {\n      events.off('routeChangeStart', handleRouteChange);\n    };\n  }, []);\n  useEffect(() => {\n    keepData.current.pathname = pathname;\n  }, [pathname]);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: `pos-fix tar z-3 t-l-0 w-100 bg-color-primary ${head_menu}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 7\n    }\n  }, __jsx(\"button\", {\n    className: classNames(`bg-color-transparent vam`, {\n      active: toogle\n    }),\n    onClick: () => setToogle(!toogle),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }\n  }, toggleBtnNums.map(num => __jsx(\"span\", {\n    key: num,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 13\n    }\n  }, __jsx(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 15\n    }\n  }))))), __jsx(\"section\", {\n    style: _objectSpread({}, toogle && {\n      left: 0\n    }, {\n      zIndex: 13\n    }, bodyStyle),\n    className: classNames(`pos-fix t-l-0 h-100 bg-color-white ${side_wrapper}`, {\n      active: toogle\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 7\n    }\n  }, __jsx(SideLogo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 9\n    }\n  }), __jsx(Menubar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: \"pos-rel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 9\n    }\n  }, __jsx(\"button\", {\n    onClick: toggleContent,\n    className: classNames('btn-theme-setting pos-abs bg-color-primary color-white p-tblr-xxs font-size-lg bd-none z-1'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 11\n    }\n  }, __jsx(SvgIcon, {\n    component: isShow ? SvgClose : SvgSetting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: \"pos-abs tblr-0 m-auto\",\n    style: {\n      transform: `translateX(${isShow ? 0 : '-100%'})`,\n      transition: '.5s'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 11\n    }\n  }, __jsx(BackgroundOrColorTheme, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default Sidebar;","map":{"version":3,"sources":["C:/Users/19215/Desktop/liuguanhua.github.io-master/liuguanhua.github.io/src/components/layout/Sidebar.tsx"],"names":["React","useState","useEffect","useRef","useContext","useCallback","Link","useRouter","Router","classNames","debounce","isString","isBoolean","isUndefined","styles","isSmallScreen","APP_CONFIG","THEME_COLOR_LIST","DEFAULT_THEME_COLOR","BACKGROUND_COLOR_LIST","DEFAULT_BACKGROUND_COLOR","DEFAULT_DARK_COLOR","DEFAULT_LOVEEYE_COLOR","globalSelf","generateNumList","setStorage","getStorage","CtxStore","Menubar","SvgIcon","Switch","ReactComponent","SvgCheck","SvgSetting","SvgClose","useIsVisible","side_wrapper","logo","theme_wrapper","head_menu","name","logoPic","g_config","themeNums","toggleBtnNums","mediaScheme","window","matchMedia","SideLogo","BackgroundOrColorTheme","isFollowSystem","setIsFollowSystem","keepData","activeKey","setActiveKey","currentColor","setCurrentColor","dispatch","rest","onSwitchTheme","backgroundKey","isColor","isMemory","isEqualReturn","isEqual","Object","is","isDefaultColor","isDarkColor","isLoveEyeColor","includes","isEmpty","bodyStyle","background","require","docStyle","document","documentElement","style","setProperty","type","payload","error","console","warn","onSwitchColor","color","themeColor","onCustomColorChange","setThemeBackground","handleSwitchTheme","e","current","isDarkMode","matches","changeIsFollowSystem","isOpen","onFollowSystem","checked","storeIsFollowSystem","media","addListener","addEventListener","removeListener","map","active","width","height","backgroundColor","slice","length","item","index","boxShadow","isLast","onClick","target","value","Sidebar","store","pathname","toogle","setToogle","isShow","toggleContent","handleRouteChange","url","events","on","off","num","left","zIndex","transform","transition"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IACEC,QADF,EAEEC,SAFF,EAGEC,MAHF,EAIEC,UAJF,EAKEC,WALF,QAMO,OANP;AAOA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,WAA9B,QAAiD,MAAjD;AAEA,OAAOC,MAAP,MAAmB,sCAAnB;AAEA,SAASC,aAAT,QAA8B,iBAA9B;AACA,SACEC,UADF,EAEEC,gBAFF,EAGEC,mBAHF,EAIEC,qBAJF,EAKEC,wBALF,EAMEC,kBANF,EAOEC,qBAPF,QAQO,mBARP;AASA,SACEC,UADF,EAEEC,eAFF,EAGEC,UAHF,EAIEC,UAJF,QAKO,gBALP;AAOA,SAASC,QAAT,QAAyB,YAAzB;AAEA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,OAAT,EAAkBC,MAAlB,QAAgC,WAAhC;AAEA,SAASC,cAAc,IAAIC,QAA3B,QAA2C,2BAA3C;AACA,SAASD,cAAc,IAAIE,UAA3B,QAA6C,8BAA7C;AACA,SAASF,cAAc,IAAIG,QAA3B,QAA2C,6BAA3C;AAEA,SAASC,YAAT,QAA6B,UAA7B;AAEA,MAAM;AAAEC,EAAAA,YAAF;AAAgBC,EAAAA,IAAhB;AAAsBC,EAAAA,aAAtB;AAAqCC,EAAAA;AAArC,IAAmDzB,MAAzD;AACA,MAAM;AAAE0B,EAAAA,IAAF;AAAQH,EAAAA,IAAI,EAAEI;AAAd,IAA0BlB,UAAU,CAACmB,QAA3C;AACA,MAAMC,SAAS,GAAGnB,eAAe,CAAC,CAAD,CAAjC;AACA,MAAMoB,aAAa,GAAGpB,eAAe,CAAC,CAAD,CAArC;;AACA,MAAMqB,WAAW,GAAG,MAAMC,MAAM,CAACC,UAAP,CAAkB,8BAAlB,CAA1B;;AAEA,MAAMC,QAAkB,GAAG,MAAM;AAC/B,SACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAG,qBAAoBX,IAAK,EAAxC;AAA2C,IAAA,KAAK,EAAEG,IAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAC,yBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE;AAAI,IAAA,SAAS,EAAC,4CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,iBADF,CAJF,EAWE;AAAK,IAAA,SAAS,EAAC,aAAf;AAA6B,IAAA,GAAG,EAAEC,OAAlC;AAA2C,IAAA,GAAG,EAAED,IAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,CADF,CADF;AAiBD,CAlBD;;AAoBA,MAAMS,sBAAgC,GAAG,MAAM;AAC7C,QAAM;AAAA,OAACC,cAAD;AAAA,OAAiBC;AAAjB,MAAsClD,QAAQ,CAAC,KAAD,CAApD;AACA,QAAMmD,QAAQ,GAAGjD,MAAM,CAAC;AACtB+C,IAAAA;AADsB,GAAD,CAAvB;AAGA,QAAM;AAAA,OAACG,SAAD;AAAA,OAAYC;AAAZ,MAA4BrD,QAAQ,EAA1C;AACA,QAAM;AAAA,OAACsD,YAAD;AAAA,OAAeC;AAAf,MAAkCvD,QAAQ,CAACiB,mBAAD,CAAhD;AACA,QAAM;AAAEuC,IAAAA;AAAF,MAAerD,UAAU,CAACuB,QAAD,CAA/B;AAEA,QAAM,GAAG,GAAG+B,IAAN,IAAcvC,qBAApB;;AAEA,QAAMwC,aAAa,GAAG,CAAC;AACrBC,IAAAA,aADqB;AAErBC,IAAAA,OAAO,GAAG,IAFW;AAGrBC,IAAAA,QAAQ,GAAG,IAHU;AAIrBC,IAAAA,aAAa,GAAG;AAJK,GAAD,KAUhB;AACJ,QAAIlD,WAAW,CAAC+C,aAAD,CAAf,EAAgC;;AAChC,QAAI;AACF,YAAMI,OAAO,GAAGD,aAAa,IAAIE,MAAM,CAACC,EAAP,CAAUb,SAAV,EAAqBO,aAArB,CAAjC;AACA,YAAM,CAACO,cAAD,EAAiBC,WAAjB,EAA8BC,cAA9B,IACJR,OAAO,IAAI,CAACG,OAAZ,GACI,CACEC,MAAM,CAACC,EAAP,CAAU9C,wBAAV,EAAoCwC,aAApC,CADF,EAEEF,IAAI,CAACY,QAAL,CAAcV,aAAd,CAFF,EAGEK,MAAM,CAACC,EAAP,CAAUN,aAAV,EAAyBtC,qBAAzB,CAHF,CADJ,GAMI,EAPN;AAQA,YAAMiD,OAAO,GAAGP,OAAO,IAAIG,cAA3B;AACA,YAAMK,SAAS,GAAGD,OAAO,GACrB,EADqB,GAErB;AACEE,QAAAA,UAAU,EAAEZ,OAAO,GACfD,aADe,GAEd,OAAMc,OAAO,CAAE,wBAAuBd,aAAc,MAAvC,CAA8C;AAHlE,OAFJ;AAOA,YAAMe,QAAQ,GAAGC,QAAQ,CAACC,eAAT,CAAyBC,KAA1C;AAEAH,MAAAA,QAAQ,CAACI,WAAT,CACE,sBADF,EAEEV,cAAc,GAAGhD,kBAAH,GAAwB+C,WAAW,GAAG,MAAH,GAAY,MAF/D;AAIAO,MAAAA,QAAQ,CAACI,WAAT,CACE,sBADF,EAEEV,cAAc,GAAG,SAAH,GAAeD,WAAW,GAAG,SAAH,GAAe,SAFzD;AAIAd,MAAAA,YAAY,CAACU,OAAO,GAAG,KAAK,CAAR,GAAYJ,aAApB,CAAZ;AACAE,MAAAA,QAAQ,IACNrC,UAAU,CAACT,UAAD,EAAa;AACrB4C,QAAAA,aAAa,EAAEW,OAAO,GAAG,KAAK,CAAR,GAAYX;AADb,OAAb,CADZ;AAIAH,MAAAA,QAAQ,CAAC;AACPuB,QAAAA,IAAI,EAAE,QADC;AAEPC,QAAAA,OAAO,EAAE;AACPT,UAAAA;AADO;AAFF,OAAD,CAAR;AAMD,KAvCD,CAuCE,OAAOU,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,IAAR,CAAc,UAAd;AACD;AACF,GAtDD;;AAwDA,QAAMC,aAAa,GAAIC,KAAD,IAAW;AAC/B,QAAIrB,MAAM,CAACC,EAAP,CAAUX,YAAV,EAAwB+B,KAAxB,CAAJ,EAAoC;AACpC,UAAMX,QAAQ,GAAGC,QAAQ,CAACC,eAAT,CAAyBC,KAA1C;AACAH,IAAAA,QAAQ,CAACI,WAAT,CAAqB,iBAArB,EAAwCO,KAAxC;AACA9B,IAAAA,eAAe,CAAC8B,KAAD,CAAf;AACA7D,IAAAA,UAAU,CAACT,UAAD,EAAa;AACrBuE,MAAAA,UAAU,EAAED;AADS,KAAb,CAAV;AAGD,GARD;;AAUA,QAAME,mBAAmB,GAAGnF,WAAW,CAACK,QAAQ,CAAC,IAAD,EAAO2E,aAAP,CAAT,EAAgC,EAAhC,CAAvC;;AAEA,QAAMI,kBAAkB,GAAG,MAAM;AAC/B,UAAM;AAAE7B,MAAAA;AAAF,QAAoBlC,UAAU,CAACV,UAAD,CAApC;AACA2C,IAAAA,aAAa,CAAC;AACZC,MAAAA,aADY;AAEZC,MAAAA,OAAO,EAAElD,QAAQ,CAACiD,aAAD,CAAR,IAA2BA,aAAa,CAACU,QAAd,CAAuB,GAAvB,CAFxB;AAGZP,MAAAA,aAAa,EAAE;AAHH,KAAD,CAAb;AAKD,GAPD;;AASA,QAAM2B,iBAAiB,GAAIC,CAAD,IAA6B;AACrD,QAAI,CAACvC,QAAQ,CAACwC,OAAT,CAAiB1C,cAAtB,EAAsC;AACtC,UAAM2C,UAAU,GAAGF,CAAC,GAAGA,CAAC,CAACG,OAAL,GAAejD,WAAW,GAAGiD,OAAjD;;AACA,QAAID,UAAJ,EAAgB;AACd,aAAOlC,aAAa,CAAC;AACnBC,QAAAA,aAAa,EAAEvC,kBADI;AAEnByC,QAAAA,QAAQ,EAAE,KAFS;AAGnBC,QAAAA,aAAa,EAAE;AAHI,OAAD,CAApB;AAKD;;AACD,WAAOJ,aAAa,CAAC;AACnBC,MAAAA,aAAa,EAAExC,wBADI;AAEnB0C,MAAAA,QAAQ,EAAE;AAFS,KAAD,CAApB;AAID,GAdD;;AAgBA,QAAMiC,oBAAoB,GAAIC,MAAD,IAAqB;AAChD7C,IAAAA,iBAAiB,CAAC6C,MAAD,CAAjB;AACA5C,IAAAA,QAAQ,CAACwC,OAAT,CAAiB1C,cAAjB,GAAkC8C,MAAlC;AACD,GAHD;;AAKA,QAAMC,cAAc,GAAIC,OAAD,IAAa;AAClCzE,IAAAA,UAAU,CAACT,UAAD,EAAa;AACrBkC,MAAAA,cAAc,EAAEgD;AADK,KAAb,CAAV;AAGAH,IAAAA,oBAAoB,CAACG,OAAD,CAApB;AACAA,IAAAA,OAAO,GAAGR,iBAAiB,EAApB,GAAyBD,kBAAkB,EAAlD;AACD,GAND;;AAQAvF,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM;AAAEqF,MAAAA,UAAF;AAAcrC,MAAAA,cAAc,EAAEiD;AAA9B,QAAsDzE,UAAU,CACpEV,UADoE,CAAtE;AAGAuE,IAAAA,UAAU,IAAIF,aAAa,CAACE,UAAD,CAA3B;;AACA,QAAI3E,SAAS,CAACuF,mBAAD,CAAT,IAAkCA,mBAAtC,EAA2D;AACzDJ,MAAAA,oBAAoB,CAAC,IAAD,CAApB;AACA,aAAOL,iBAAiB,EAAxB;AACD;;AACDD,IAAAA,kBAAkB;AACnB,GAVQ,EAUN,EAVM,CAAT;AAYAvF,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMkG,KAAK,GAAGvD,WAAW,EAAzB;AACAuD,IAAAA,KAAK,CAACC,WAAN,GACID,KAAK,CAACC,WAAN,CAAkBX,iBAAlB,CADJ,GAEIU,KAAK,CAACE,gBAAN,CAAuB,QAAvB,EAAiCZ,iBAAjC,CAFJ;AAGA,WAAO,MAAM;AACX;AAAC,OAACU,KAAK,CAACG,cAAN,IAAwBH,KAAK,CAACG,cAA/B,EAA+Cb,iBAA/C;AACF,KAFD;AAGD,GARQ,EAQN,EARM,CAAT;AAUA,SACE;AAAS,IAAA,SAAS,EAAG,GAAEpD,aAAc,aAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,0BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGnB,qBAAqB,CAACqF,GAAtB,CAA2BlB,KAAD,IAAW;AACpC,WACE;AACE,MAAA,SAAS,EAAE7E,UAAU,CAAC,SAAD,EAAY;AAC/BgG,QAAAA,MAAM,EAAE,CAACvD,cAAD,IAAmBe,MAAM,CAACC,EAAP,CAAUb,SAAV,EAAqBiC,KAArB;AADI,OAAZ,CADvB;AAIE,MAAA,QAAQ,EAAEpC,cAJZ;AAKE,MAAA,KAAK,EAAE;AACLwD,QAAAA,KAAK,EAAE,EADF;AAELC,QAAAA,MAAM,EAAE,EAFH;AAGLC,QAAAA,eAAe,EAAEtB;AAHZ,OALT;AAUE,MAAA,OAAO,EAAE,MAAM3B,aAAa,CAAC;AAAEC,QAAAA,aAAa,EAAE0B;AAAjB,OAAD,CAV9B;AAWE,MAAA,GAAG,EAAEA,KAXP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAaE,MAAC,OAAD;AACE,MAAA,SAAS,EAAC,0CADZ;AAEE,MAAA,SAAS,EAAEtD,QAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,CADF;AAoBD,GArBA,CADH,EAuBGW,SAAS,CAACkE,KAAV,CAAgB,EAAElE,SAAS,CAACmE,MAAV,GAAmB,CAArB,CAAhB,EAAyCN,GAAzC,CAA8CO,IAAD,IAAU;AACtD,UAAMC,KAAK,GAAG,EAAED,IAAhB;AACA,WACE;AACE,MAAA,SAAS,EAAEtG,UAAU,CAAC,SAAD,EAAY;AAC/BgG,QAAAA,MAAM,EAAE,CAACvD,cAAD,IAAmBe,MAAM,CAACC,EAAP,CAAUb,SAAV,EAAqB2D,KAArB;AADI,OAAZ,CADvB;AAIE,MAAA,QAAQ,EAAE9D;AAJZ,OAKOG,SAAS,IAAI;AAChByB,MAAAA,KAAK,EAAE;AACLmC,QAAAA,SAAS,EAAE;AADN;AADS,KALpB;AAUE,MAAA,OAAO,EAAE,MACPtD,aAAa,CAAC;AAAEC,QAAAA,aAAa,EAAEoD,KAAjB;AAAwBnD,QAAAA,OAAO,EAAE;AAAjC,OAAD,CAXjB;AAaE,MAAA,GAAG,EAAEmD,KAbP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAeE;AAAG,MAAA,SAAS,EAAG,UAASA,KAAM,EAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfF,EAgBE,MAAC,OAAD;AACE,MAAA,SAAS,EAAC,0CADZ;AAEE,MAAA,SAAS,EAAEhF,QAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBF,CADF;AAuBD,GAzBA,CAvBH,EAiDE;AAAI,IAAA,SAAS,EAAC,mCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAEE;AAAM,IAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAEkB,cADX;AAEE,IAAA,eAAe,EAAC,QAFlB;AAGE,IAAA,iBAAiB,EAAC,QAHpB;AAIE,IAAA,QAAQ,EAAE+C,cAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CAjDF,CAFF,EA+DE;AAAI,IAAA,SAAS,EAAC,iCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBA/DF,EAgEGhF,gBAAgB,CAACuF,GAAjB,CAAqB,CAAClB,KAAD,EAAQ0B,KAAR,KAAkB;AACtC,UAAME,MAAM,GAAGjD,MAAM,CAACC,EAAP,CAAUjD,gBAAgB,CAAC6F,MAAjB,GAA0B,CAApC,EAAuCE,KAAvC,CAAf;AACA,WACE;AACE,MAAA,SAAS,EAAEvG,UAAU,CAAC,SAAD,EAAY;AAC/BgG,QAAAA,MAAM,EAAExC,MAAM,CAACC,EAAP,CAAUX,YAAV,EAAwB+B,KAAxB;AADuB,OAAZ,CADvB;AAIE,MAAA,KAAK,EAAE;AACLoB,QAAAA,KAAK,EAAE,EADF;AAELC,QAAAA,MAAM,EAAE,EAFH;AAGLC,QAAAA,eAAe,EAAEtB;AAHZ;AAJT,OASO,CAAC4B,MAAD,IAAW;AACdC,MAAAA,OAAO,EAAE,MAAM9B,aAAa,CAACC,KAAD;AADd,KATlB;AAYE,MAAA,GAAG,EAAEA,KAZP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAcE,MAAC,OAAD;AACE,MAAA,SAAS,EAAC,wCADZ;AAEE,MAAA,SAAS,EAAEtD,QAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAdF,EAkBGkF,MAAM,IACL,4BACE;AACE,MAAA,SAAS,EAAC,mDADZ;AAEE,MAAA,QAAQ,EAAE,CAAC;AAAEE,QAAAA,MAAM,EAAE;AAAEC,UAAAA;AAAF;AAAV,OAAD,KACR7B,mBAAmB,CAAC6B,KAAD,CAHvB;AAKE,MAAA,IAAI,EAAC,OALP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAM,MAAA,SAAS,EAAC,0BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BARF,CAnBJ,CADF;AAiCD,GAnCA,CAhEH,CADF;AAuGD,CAlPD;;AAsPA,MAAMC,OAAgC,GAAG,MAAM;AAC7C,QAAM;AAAEC,IAAAA;AAAF,MAAYnH,UAAU,CAACuB,QAAD,CAA5B;AACA,QAAM;AAAE6C,IAAAA;AAAF,MAAgB+C,KAAtB;AACA,QAAMnE,QAAQ,GAAGjD,MAAM,CAAC;AACtBqH,IAAAA,QAAQ,EAAE;AADY,GAAD,CAAvB;AAGA,QAAM;AAAEA,IAAAA;AAAF,MAAejH,SAAS,EAA9B;AACA,QAAM;AAAA,OAACkH,MAAD;AAAA,OAASC;AAAT,MAAsBzH,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM;AAAE0H,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAA4BzF,YAAY,EAA9C;AAEAjC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACa,aAAa,EAAlB,EAAsB;;AACtB,UAAM8G,iBAAiB,GAAIC,GAAD,IAAS;AACjC,YAAM;AAAEN,QAAAA;AAAF,UAAepE,QAAQ,CAACwC,OAA9B;;AACA,UAAI,CAAC3B,MAAM,CAACC,EAAP,CAAU4D,GAAV,EAAeN,QAAf,CAAL,EAA+B;AAC7BE,QAAAA,SAAS,CAAC,KAAD,CAAT;AACD;AACF,KALD;;AAMA,UAAM;AAAEK,MAAAA;AAAF,QAAavH,MAAnB;AACAuH,IAAAA,MAAM,CAACC,EAAP,CAAU,kBAAV,EAA8BH,iBAA9B;AACA,WAAO,MAAM;AACXE,MAAAA,MAAM,CAACE,GAAP,CAAW,kBAAX,EAA+BJ,iBAA/B;AACD,KAFD;AAGD,GAbQ,EAaN,EAbM,CAAT;AAeA3H,EAAAA,SAAS,CAAC,MAAM;AACdkD,IAAAA,QAAQ,CAACwC,OAAT,CAAiB4B,QAAjB,GAA4BA,QAA5B;AACD,GAFQ,EAEN,CAACA,QAAD,CAFM,CAAT;AAIA,SACE,4BACE;AACE,IAAA,SAAS,EAAG,gDAA+CjF,SAAU,EADvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGE;AACE,IAAA,SAAS,EAAE9B,UAAU,CAAE,0BAAF,EAA6B;AAChDgG,MAAAA,MAAM,EAAEgB;AADwC,KAA7B,CADvB;AAIE,IAAA,OAAO,EAAE,MAAMC,SAAS,CAAC,CAACD,MAAF,CAJ1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMG7E,aAAa,CAAC4D,GAAd,CAAmB0B,GAAD,IACjB;AAAM,IAAA,GAAG,EAAEA,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADD,CANH,CAHF,CADF,EAiBE;AACE,IAAA,KAAK,oBACCT,MAAM,IAAI;AACZU,MAAAA,IAAI,EAAE;AADM,KADX;AAIHC,MAAAA,MAAM,EAAE;AAJL,OAKA5D,SALA,CADP;AAQE,IAAA,SAAS,EAAE/D,UAAU,CAClB,sCAAqC2B,YAAa,EADhC,EAEnB;AACEqE,MAAAA,MAAM,EAAEgB;AADV,KAFmB,CARvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAeE,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfF,EAgBE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,EAiBE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,OAAO,EAAEG,aADX;AAEE,IAAA,SAAS,EAAEnH,UAAU,CACnB,4FADmB,CAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME,MAAC,OAAD;AAAS,IAAA,SAAS,EAAEkH,MAAM,GAAGzF,QAAH,GAAcD,UAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CADF,EASE;AACE,IAAA,SAAS,EAAC,uBADZ;AAEE,IAAA,KAAK,EAAE;AACLoG,MAAAA,SAAS,EAAG,cAAaV,MAAM,GAAG,CAAH,GAAO,OAAQ,GADzC;AAELW,MAAAA,UAAU,EAAE;AAFP,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE,MAAC,sBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,CATF,CAjBF,CAjBF,CADF;AAyDD,CAtFD;;AAwFA,eAAehB,OAAf","sourcesContent":["import React, {\r\n  useState,\r\n  useEffect,\r\n  useRef,\r\n  useContext,\r\n  useCallback,\r\n} from 'react'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/router'\r\nimport Router from 'next/router'\r\nimport classNames from 'classnames'\r\nimport { debounce } from 'throttle-debounce'\r\nimport { isString, isBoolean, isUndefined } from 'util'\r\n\r\nimport styles from '@styles/sass/frame/menus.module.scss'\r\n\r\nimport { isSmallScreen } from '@scripts/helper'\r\nimport {\r\n  APP_CONFIG,\r\n  THEME_COLOR_LIST,\r\n  DEFAULT_THEME_COLOR,\r\n  BACKGROUND_COLOR_LIST,\r\n  DEFAULT_BACKGROUND_COLOR,\r\n  DEFAULT_DARK_COLOR,\r\n  DEFAULT_LOVEEYE_COLOR,\r\n} from '@scripts/constant'\r\nimport {\r\n  globalSelf,\r\n  generateNumList,\r\n  setStorage,\r\n  getStorage,\r\n} from '@scripts/utils'\r\n\r\nimport { CtxStore } from '../context'\r\n\r\nimport Menubar from './Menubar'\r\nimport { SvgIcon, Switch } from '../common'\r\n\r\nimport { ReactComponent as SvgCheck } from '@fonts/svg/menu/check.svg'\r\nimport { ReactComponent as SvgSetting } from '@fonts/svg/merge/setting.svg'\r\nimport { ReactComponent as SvgClose } from '@fonts/svg/shared/close.svg'\r\n\r\nimport { useIsVisible } from '../hooks'\r\n\r\nconst { side_wrapper, logo, theme_wrapper, head_menu } = styles\r\nconst { name, logo: logoPic } = globalSelf.g_config\r\nconst themeNums = generateNumList(5)\r\nconst toggleBtnNums = generateNumList(3)\r\nconst mediaScheme = () => window.matchMedia('(prefers-color-scheme: dark)')\r\n\r\nconst SideLogo: React.FC = () => {\r\n  return (\r\n    <Link href=\"/\">\r\n      <a className={`tac pos-rel block ${logo}`} title={name}>\r\n        <div className=\"round bdr-half\">\r\n          <i className=\"icon-circle pos-abs t-0\" />\r\n        </div>\r\n        <h2 className=\"pos-abs r-m-p color-white bg-color-primary\">\r\n          <span className=\"vam\">\r\n            前端\r\n            <br />\r\n            一枚\r\n          </span>\r\n        </h2>\r\n        <img className=\"pos-abs vam\" src={logoPic} alt={name} />\r\n      </a>\r\n    </Link>\r\n  )\r\n}\r\n\r\nconst BackgroundOrColorTheme: React.FC = () => {\r\n  const [isFollowSystem, setIsFollowSystem] = useState(false)\r\n  const keepData = useRef({\r\n    isFollowSystem,\r\n  })\r\n  const [activeKey, setActiveKey] = useState()\r\n  const [currentColor, setCurrentColor] = useState(DEFAULT_THEME_COLOR)\r\n  const { dispatch } = useContext(CtxStore)\r\n\r\n  const [, ...rest] = BACKGROUND_COLOR_LIST\r\n\r\n  const onSwitchTheme = ({\r\n    backgroundKey,\r\n    isColor = true,\r\n    isMemory = true,\r\n    isEqualReturn = true,\r\n  }: {\r\n    backgroundKey: any\r\n    isColor?: boolean\r\n    isMemory?: boolean\r\n    isEqualReturn?: boolean\r\n  }) => {\r\n    if (isUndefined(backgroundKey)) return\r\n    try {\r\n      const isEqual = isEqualReturn && Object.is(activeKey, backgroundKey)\r\n      const [isDefaultColor, isDarkColor, isLoveEyeColor] =\r\n        isColor && !isEqual\r\n          ? [\r\n              Object.is(DEFAULT_BACKGROUND_COLOR, backgroundKey),\r\n              rest.includes(backgroundKey),\r\n              Object.is(backgroundKey, DEFAULT_LOVEEYE_COLOR),\r\n            ]\r\n          : []\r\n      const isEmpty = isEqual || isDefaultColor\r\n      const bodyStyle = isEmpty\r\n        ? {}\r\n        : {\r\n            background: isColor\r\n              ? backgroundKey\r\n              : `url(${require(`@images/icons/icon-bg${backgroundKey}.png`)})`,\r\n          }\r\n      const docStyle = document.documentElement.style\r\n\r\n      docStyle.setProperty(\r\n        '--color-default-gray',\r\n        isLoveEyeColor ? DEFAULT_DARK_COLOR : isDarkColor ? '#fff' : '#aaa'\r\n      )\r\n      docStyle.setProperty(\r\n        '--color-lighten-gray',\r\n        isLoveEyeColor ? '#d2d2d2' : isDarkColor ? '#676767' : '#dadada'\r\n      )\r\n      setActiveKey(isEqual ? void 0 : backgroundKey)\r\n      isMemory &&\r\n        setStorage(APP_CONFIG, {\r\n          backgroundKey: isEmpty ? void 0 : backgroundKey,\r\n        })\r\n      dispatch({\r\n        type: 'global',\r\n        payload: {\r\n          bodyStyle,\r\n        },\r\n      })\r\n    } catch (error) {\r\n      console.warn(`引入背景图片失败`)\r\n    }\r\n  }\r\n\r\n  const onSwitchColor = (color) => {\r\n    if (Object.is(currentColor, color)) return\r\n    const docStyle = document.documentElement.style\r\n    docStyle.setProperty('--color-primary', color)\r\n    setCurrentColor(color)\r\n    setStorage(APP_CONFIG, {\r\n      themeColor: color,\r\n    })\r\n  }\r\n\r\n  const onCustomColorChange = useCallback(debounce(1000, onSwitchColor), [])\r\n\r\n  const setThemeBackground = () => {\r\n    const { backgroundKey } = getStorage(APP_CONFIG)\r\n    onSwitchTheme({\r\n      backgroundKey,\r\n      isColor: isString(backgroundKey) && backgroundKey.includes('#'),\r\n      isEqualReturn: false,\r\n    })\r\n  }\r\n\r\n  const handleSwitchTheme = (e?: MediaQueryListEvent) => {\r\n    if (!keepData.current.isFollowSystem) return\r\n    const isDarkMode = e ? e.matches : mediaScheme().matches\r\n    if (isDarkMode) {\r\n      return onSwitchTheme({\r\n        backgroundKey: DEFAULT_DARK_COLOR,\r\n        isMemory: false,\r\n        isEqualReturn: false,\r\n      })\r\n    }\r\n    return onSwitchTheme({\r\n      backgroundKey: DEFAULT_BACKGROUND_COLOR,\r\n      isMemory: false,\r\n    })\r\n  }\r\n\r\n  const changeIsFollowSystem = (isOpen: boolean) => {\r\n    setIsFollowSystem(isOpen)\r\n    keepData.current.isFollowSystem = isOpen\r\n  }\r\n\r\n  const onFollowSystem = (checked) => {\r\n    setStorage(APP_CONFIG, {\r\n      isFollowSystem: checked,\r\n    })\r\n    changeIsFollowSystem(checked)\r\n    checked ? handleSwitchTheme() : setThemeBackground()\r\n  }\r\n\r\n  useEffect(() => {\r\n    const { themeColor, isFollowSystem: storeIsFollowSystem } = getStorage(\r\n      APP_CONFIG\r\n    )\r\n    themeColor && onSwitchColor(themeColor)\r\n    if (isBoolean(storeIsFollowSystem) && storeIsFollowSystem) {\r\n      changeIsFollowSystem(true)\r\n      return handleSwitchTheme()\r\n    }\r\n    setThemeBackground()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const media = mediaScheme()\r\n    media.addListener\r\n      ? media.addListener(handleSwitchTheme)\r\n      : media.addEventListener('change', handleSwitchTheme)\r\n    return () => {\r\n      ;(media.removeListener || media.removeListener)(handleSwitchTheme)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <section className={`${theme_wrapper} tac p-b-xl`}>\r\n      <h4 className=\"font-weight-normal r-m-p\">背景</h4>\r\n      <div className=\"m-t-xl\">\r\n        {BACKGROUND_COLOR_LIST.map((color) => {\r\n          return (\r\n            <button\r\n              className={classNames('pos-rel', {\r\n                active: !isFollowSystem && Object.is(activeKey, color),\r\n              })}\r\n              disabled={isFollowSystem}\r\n              style={{\r\n                width: 42,\r\n                height: 32,\r\n                backgroundColor: color,\r\n              }}\r\n              onClick={() => onSwitchTheme({ backgroundKey: color })}\r\n              key={color}\r\n            >\r\n              <SvgIcon\r\n                className=\"pos-abs tblr-0 m-auto hide color-primary\"\r\n                component={SvgCheck}\r\n              />\r\n            </button>\r\n          )\r\n        })}\r\n        {themeNums.slice(-(themeNums.length - 2)).map((item) => {\r\n          const index = ++item\r\n          return (\r\n            <button\r\n              className={classNames('pos-rel', {\r\n                active: !isFollowSystem && Object.is(activeKey, index),\r\n              })}\r\n              disabled={isFollowSystem}\r\n              {...(activeKey && {\r\n                style: {\r\n                  boxShadow: '0px 0px 5px var(--color-lighten-gray)',\r\n                },\r\n              })}\r\n              onClick={() =>\r\n                onSwitchTheme({ backgroundKey: index, isColor: false })\r\n              }\r\n              key={index}\r\n            >\r\n              <i className={`icon-bg${index}`} />\r\n              <SvgIcon\r\n                className=\"pos-abs tblr-0 m-auto hide color-primary\"\r\n                component={SvgCheck}\r\n              />\r\n            </button>\r\n          )\r\n        })}\r\n        <h4 className=\"font-weight-normal r-m-p m-t-b-xl\">\r\n          跟随系统:\r\n          <span className=\"m-l-xxs\">\r\n            <Switch\r\n              checked={isFollowSystem}\r\n              checkedChildren=\"开\"\r\n              uncheckedChildren=\"关\"\r\n              onChange={onFollowSystem}\r\n            />\r\n          </span>\r\n        </h4>\r\n      </div>\r\n      <h4 className=\"font-weight-normal r-m-p m-b-xl\">颜色</h4>\r\n      {THEME_COLOR_LIST.map((color, index) => {\r\n        const isLast = Object.is(THEME_COLOR_LIST.length - 1, index)\r\n        return (\r\n          <button\r\n            className={classNames('pos-rel', {\r\n              active: Object.is(currentColor, color),\r\n            })}\r\n            style={{\r\n              width: 42,\r\n              height: 32,\r\n              backgroundColor: color,\r\n            }}\r\n            {...(!isLast && {\r\n              onClick: () => onSwitchColor(color),\r\n            })}\r\n            key={color}\r\n          >\r\n            <SvgIcon\r\n              className=\"pos-abs tblr-0 m-auto hide color-white\"\r\n              component={SvgCheck}\r\n            />\r\n            {isLast && (\r\n              <>\r\n                <input\r\n                  className=\"input-custom-color pos-abs tblr-0 w-h-100 cursign\"\r\n                  onChange={({ target: { value } }) =>\r\n                    onCustomColorChange(value)\r\n                  }\r\n                  type=\"color\"\r\n                />\r\n                <span className=\"font-size-xs color-white\">自定义</span>\r\n              </>\r\n            )}\r\n          </button>\r\n        )\r\n      })}\r\n    </section>\r\n  )\r\n}\r\n\r\ninterface ISidebarProps {}\r\n\r\nconst Sidebar: React.FC<ISidebarProps> = () => {\r\n  const { store } = useContext(CtxStore)\r\n  const { bodyStyle } = store\r\n  const keepData = useRef({\r\n    pathname: '',\r\n  })\r\n  const { pathname } = useRouter()\r\n  const [toogle, setToogle] = useState(false)\r\n  const { isShow, toggleContent } = useIsVisible()\r\n\r\n  useEffect(() => {\r\n    if (!isSmallScreen()) return\r\n    const handleRouteChange = (url) => {\r\n      const { pathname } = keepData.current\r\n      if (!Object.is(url, pathname)) {\r\n        setToogle(false)\r\n      }\r\n    }\r\n    const { events } = Router\r\n    events.on('routeChangeStart', handleRouteChange)\r\n    return () => {\r\n      events.off('routeChangeStart', handleRouteChange)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    keepData.current.pathname = pathname\r\n  }, [pathname])\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={`pos-fix tar z-3 t-l-0 w-100 bg-color-primary ${head_menu}`}\r\n      >\r\n        <button\r\n          className={classNames(`bg-color-transparent vam`, {\r\n            active: toogle,\r\n          })}\r\n          onClick={() => setToogle(!toogle)}\r\n        >\r\n          {toggleBtnNums.map((num) => (\r\n            <span key={num}>\r\n              <i />\r\n            </span>\r\n          ))}\r\n        </button>\r\n      </div>\r\n      <section\r\n        style={{\r\n          ...(toogle && {\r\n            left: 0,\r\n          }),\r\n          zIndex: 13,\r\n          ...bodyStyle,\r\n        }}\r\n        className={classNames(\r\n          `pos-fix t-l-0 h-100 bg-color-white ${side_wrapper}`,\r\n          {\r\n            active: toogle,\r\n          }\r\n        )}\r\n      >\r\n        <SideLogo />\r\n        <Menubar />\r\n        <div className=\"pos-rel\">\r\n          <button\r\n            onClick={toggleContent}\r\n            className={classNames(\r\n              'btn-theme-setting pos-abs bg-color-primary color-white p-tblr-xxs font-size-lg bd-none z-1'\r\n            )}\r\n          >\r\n            <SvgIcon component={isShow ? SvgClose : SvgSetting} />\r\n          </button>\r\n          <div\r\n            className=\"pos-abs tblr-0 m-auto\"\r\n            style={{\r\n              transform: `translateX(${isShow ? 0 : '-100%'})`,\r\n              transition: '.5s',\r\n            }}\r\n          >\r\n            <BackgroundOrColorTheme />\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n"]},"metadata":{},"sourceType":"module"}