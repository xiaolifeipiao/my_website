{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport store from 'store';\nimport { isObject, isArray } from 'util';\nimport { Random } from 'mockjs';\nimport { getWindowWidthHeight } from '../helper';\nimport { DEFAULT_PAGE_SIZE, PARAMS_ERROR } from '../constant';\n\nrequire('@root/config');\n\nexport const globalSelf = (() => false ? window : global)();\n/**\r\n * 生成一定长度的数组\r\n * @param {number} [num=0]\r\n */\n\nexport const generateNumList = (num = 0) => [...Array(num).keys()];\n/**\r\n * 滚动到具体位置\r\n * @param {number} [scrollHeight=getWindowWidthHeight().height]\r\n */\n\nexport const scrollToFixedLocate = (scrollHeight = getWindowWidthHeight().height) => {\n  window.scrollTo({\n    top: scrollHeight,\n    behavior: 'smooth'\n  });\n};\nexport const isValidArray = data => isArray(data) && Boolean(data.length);\nexport const getStorage = (key, isDefaultEmptyObject = true) => {\n  const storeData = IS_CLIENT ? store.get(key) : {};\n  return storeData || (isDefaultEmptyObject ? {} : void 0);\n};\nexport const setStorage = (key, value, isReassign = false) => {\n  if (isObject(value)) {\n    value['timestamp'] = +new Date();\n\n    if (!isReassign) {\n      const oldStoreData = getStorage(key);\n      value = _objectSpread({}, oldStoreData, {}, value);\n    }\n  }\n\n  store.set(key, value);\n};\n\n/**\r\n * 查找集合索引\r\n * @template T\r\n * @param {TFindDataIndexProps<T>} {\r\n *   data = [],\r\n *   target,\r\n *   key,\r\n * }\r\n */\nexport const findDataIndex = ({\n  data = [],\n  target,\n  key\n}) => data.findIndex(item => Object.is(isObject(item) ? item[key] : item, target));\n/**\r\n * 获取样式\r\n * @param {*} ele\r\n * @returns {CSSStyleDeclaration}\r\n */\n\nexport const getStyle = ele => {\n  if (window.getComputedStyle) {\n    return window.getComputedStyle(ele, null);\n  }\n\n  return ele.currentStyle;\n};\n\n/**\r\n * 对数据进行分页\r\n * @param {*} [query={}]\r\n * @param {*} [data=[]]\r\n * @returns\r\n */\nexport const willDataDoPagination = ({\n  query = {},\n  data = []\n} = {}) => {\n  const {\n    pageIndex: pIndex = 1,\n    pageSize: pSize = DEFAULT_PAGE_SIZE\n  } = query;\n  const pageIndex = Math.floor(pIndex);\n  const pageSize = Math.floor(pSize);\n  const totalCount = data.length;\n  data = isArray(data) ? data : [];\n\n  try {\n    if (isNaN(pageIndex) || isNaN(pageSize)) {\n      throw new Error(PARAMS_ERROR);\n    }\n  } catch (error) {\n    return {\n      data: [],\n      totalCount,\n      pageTotal: 0,\n      pageSize: DEFAULT_PAGE_SIZE,\n      pageIndex: 1,\n      hasPrevPage: false,\n      hasNextPage: false,\n      error\n    };\n  }\n\n  let limitData = [];\n  const totalPage = Math.ceil(totalCount / pageSize);\n  const hasNextPage = pageIndex < totalPage;\n\n  if (hasNextPage || Object.is(pageIndex, totalPage)) {\n    const sliceIndex = (pageIndex - 1) * pageSize;\n    limitData = data.slice(sliceIndex, pageSize * pageIndex);\n  }\n\n  const hasLength = Boolean(totalCount);\n  return {\n    data: limitData,\n    totalCount,\n    pageTotal: totalPage,\n    pageSize: pageSize,\n    pageIndex: pageIndex,\n    hasPrevPage: hasLength && pageIndex > 1,\n    hasNextPage: hasLength && hasNextPage\n  };\n};\nexport const paginationAfterData = options => {\n  return new Promise((resolve, reject) => {\n    const info = willDataDoPagination(options);\n    return info.error ? reject(info.error) : resolve(info);\n  });\n};\nexport const createImage = (option = {}) => {\n  const {\n    width = 100,\n    height = 200,\n    bgColor = Random.color(),\n    text = Random.word(1)\n  } = option;\n  return Random.image(`${width}x${height}`, bgColor, '#fff', text);\n};","map":{"version":3,"sources":["C:/Users/19215/Desktop/liuguanhua.github.io-master/liuguanhua.github.io/src/scripts/utils/index.ts"],"names":["store","isObject","isArray","Random","getWindowWidthHeight","DEFAULT_PAGE_SIZE","PARAMS_ERROR","require","globalSelf","window","global","generateNumList","num","Array","keys","scrollToFixedLocate","scrollHeight","height","scrollTo","top","behavior","isValidArray","data","Boolean","length","getStorage","key","isDefaultEmptyObject","storeData","IS_CLIENT","get","setStorage","value","isReassign","Date","oldStoreData","set","findDataIndex","target","findIndex","item","Object","is","getStyle","ele","getComputedStyle","currentStyle","willDataDoPagination","query","pageIndex","pIndex","pageSize","pSize","Math","floor","totalCount","isNaN","Error","error","pageTotal","hasPrevPage","hasNextPage","limitData","totalPage","ceil","sliceIndex","slice","hasLength","paginationAfterData","options","Promise","resolve","reject","info","createImage","option","width","bgColor","color","text","word","image"],"mappings":"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","sourcesContent":["import store from 'store'\r\nimport { isObject, isArray } from 'util'\r\nimport { Random } from 'mockjs'\r\n\r\nimport { getWindowWidthHeight } from '../helper'\r\nimport { DEFAULT_PAGE_SIZE, PARAMS_ERROR } from '../constant'\r\n\r\nrequire('@root/config')\r\n\r\nexport const globalSelf: Window | NodeJS.Global = (() =>\r\n  typeof window !== 'undefined' ? window : global)()\r\n\r\n/**\r\n * 生成一定长度的数组\r\n * @param {number} [num=0]\r\n */\r\nexport const generateNumList = (num: number = 0) => [...Array(num).keys()]\r\n\r\n/**\r\n * 滚动到具体位置\r\n * @param {number} [scrollHeight=getWindowWidthHeight().height]\r\n */\r\nexport const scrollToFixedLocate = (\r\n  scrollHeight: number = getWindowWidthHeight().height\r\n) => {\r\n  window.scrollTo({\r\n    top: scrollHeight,\r\n    behavior: 'smooth',\r\n  })\r\n}\r\n\r\nexport const isValidArray = (data?: any): boolean =>\r\n  isArray(data) && Boolean(data.length)\r\n\r\nexport const getStorage = (\r\n  key: string,\r\n  isDefaultEmptyObject: boolean = true\r\n) => {\r\n  const storeData = IS_CLIENT ? store.get(key) : {}\r\n  return storeData || (isDefaultEmptyObject ? {} : void 0)\r\n}\r\n\r\nexport const setStorage = <T>(\r\n  key: string,\r\n  value: T,\r\n  isReassign: boolean = false\r\n) => {\r\n  if (isObject(value)) {\r\n    value['timestamp'] = +new Date()\r\n    if (!isReassign) {\r\n      const oldStoreData = getStorage(key)\r\n      value = {\r\n        ...oldStoreData,\r\n        ...value,\r\n      }\r\n    }\r\n  }\r\n  store.set(key, value)\r\n}\r\n\r\ntype TFindDataIndexProps<T> = T extends object\r\n  ? {\r\n      data?: T[]\r\n      target?: any\r\n      key: keyof T\r\n    }\r\n  : {\r\n      data?: any[]\r\n      target?: any\r\n      key?: undefined\r\n    }\r\n\r\n/**\r\n * 查找集合索引\r\n * @template T\r\n * @param {TFindDataIndexProps<T>} {\r\n *   data = [],\r\n *   target,\r\n *   key,\r\n * }\r\n */\r\nexport const findDataIndex = <T>({\r\n  data = [],\r\n  target,\r\n  key,\r\n}: TFindDataIndexProps<T>) =>\r\n  data.findIndex((item) => Object.is(isObject(item) ? item[key] : item, target))\r\n\r\n/**\r\n * 获取样式\r\n * @param {*} ele\r\n * @returns {CSSStyleDeclaration}\r\n */\r\nexport const getStyle = (ele): CSSStyleDeclaration => {\r\n  if (window.getComputedStyle) {\r\n    return window.getComputedStyle(ele, null)\r\n  }\r\n  return ele.currentStyle\r\n}\r\n\r\ninterface IDoPaginationOptionProps {\r\n  query?: { pageIndex?: number; pageSize?: number }\r\n  data?: any[]\r\n}\r\n/**\r\n * 对数据进行分页\r\n * @param {*} [query={}]\r\n * @param {*} [data=[]]\r\n * @returns\r\n */\r\nexport const willDataDoPagination = ({\r\n  query = {},\r\n  data = [],\r\n}: IDoPaginationOptionProps = {}) => {\r\n  const { pageIndex: pIndex = 1, pageSize: pSize = DEFAULT_PAGE_SIZE } = query\r\n  const pageIndex = Math.floor(pIndex)\r\n  const pageSize = Math.floor(pSize)\r\n  const totalCount = data.length\r\n  data = isArray(data) ? data : []\r\n  try {\r\n    if (isNaN(pageIndex) || isNaN(pageSize)) {\r\n      throw new Error(PARAMS_ERROR)\r\n    }\r\n  } catch (error) {\r\n    return {\r\n      data: [],\r\n      totalCount,\r\n      pageTotal: 0,\r\n      pageSize: DEFAULT_PAGE_SIZE,\r\n      pageIndex: 1,\r\n      hasPrevPage: false,\r\n      hasNextPage: false,\r\n      error,\r\n    }\r\n  }\r\n  let limitData: any[] = []\r\n  const totalPage = Math.ceil(totalCount / pageSize)\r\n  const hasNextPage = pageIndex < totalPage\r\n  if (hasNextPage || Object.is(pageIndex, totalPage)) {\r\n    const sliceIndex = (pageIndex - 1) * pageSize\r\n    limitData = data.slice(sliceIndex, pageSize * pageIndex)\r\n  }\r\n  const hasLength = Boolean(totalCount)\r\n  return {\r\n    data: limitData,\r\n    totalCount,\r\n    pageTotal: totalPage,\r\n    pageSize: pageSize,\r\n    pageIndex: pageIndex,\r\n    hasPrevPage: hasLength && pageIndex > 1,\r\n    hasNextPage: hasLength && hasNextPage,\r\n  }\r\n}\r\n\r\nexport const paginationAfterData = (options: IDoPaginationOptionProps) => {\r\n  return new Promise<any>((resolve, reject) => {\r\n    const info = willDataDoPagination(options)\r\n    return info.error ? reject(info.error) : resolve(info)\r\n  })\r\n}\r\n\r\nexport const createImage = (\r\n  option: {\r\n    width?: number\r\n    height?: number\r\n    bgColor?: string\r\n    text?: string\r\n  } = {}\r\n) => {\r\n  const {\r\n    width = 100,\r\n    height = 200,\r\n    bgColor = Random.color(),\r\n    text = Random.word(1),\r\n  } = option\r\n  return Random.image(`${width}x${height}`, bgColor, '#fff', text)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}