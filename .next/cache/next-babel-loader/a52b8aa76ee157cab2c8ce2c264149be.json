{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\19215\\\\Desktop\\\\liuguanhua.github.io-master\\\\liuguanhua.github.io\\\\src\\\\components\\\\react-sticky\\\\Sticky.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nvar Sticky = /*#__PURE__*/function (_Component) {\n  _inherits(Sticky, _Component);\n\n  var _super = _createSuper(Sticky);\n\n  function Sticky(props, context) {\n    var _this;\n\n    _classCallCheck(this, Sticky);\n\n    _this = _super.call(this, props, context);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isSticky: false,\n      wasSticky: false,\n      style: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleContainerEvent\", function (_ref) {\n      var distanceFromTop = _ref.distanceFromTop,\n          distanceFromBottom = _ref.distanceFromBottom,\n          eventSource = _ref.eventSource;\n\n      var parent = _this.context.getParent();\n\n      var preventingStickyStateChanges = false;\n\n      if (_this.props.relative) {\n        preventingStickyStateChanges = eventSource !== parent;\n        distanceFromTop = -(eventSource.scrollTop + eventSource.offsetTop) + _this.placeholder.offsetTop;\n      }\n\n      var placeholderClientRect = _this.placeholder.getBoundingClientRect();\n\n      var contentClientRect = _this.content.getBoundingClientRect();\n\n      var calculatedHeight = contentClientRect.height;\n      var bottomDifference = distanceFromBottom - _this.props.bottomOffset - calculatedHeight;\n      var wasSticky = !!_this.state.isSticky;\n      var isSticky = preventingStickyStateChanges ? wasSticky : distanceFromTop <= -_this.props.topOffset && distanceFromBottom > -_this.props.bottomOffset;\n      distanceFromBottom = (_this.props.relative ? parent.scrollHeight - parent.scrollTop : distanceFromBottom) - calculatedHeight;\n      var style = !isSticky ? {} : {\n        position: 'fixed',\n        top: bottomDifference > 0 ? _this.props.relative ? parent.offsetTop - parent.offsetParent.scrollTop : 0 : bottomDifference,\n        left: placeholderClientRect.left,\n        width: placeholderClientRect.width\n      };\n\n      if (!_this.props.disableHardwareAcceleration) {\n        style.transform = 'translateZ(0)';\n      }\n\n      _this.setState({\n        isSticky: isSticky,\n        wasSticky: wasSticky,\n        distanceFromTop: distanceFromTop,\n        distanceFromBottom: distanceFromBottom,\n        calculatedHeight: calculatedHeight,\n        style: style\n      });\n    });\n\n    if (!_this.context.subscribe) throw new TypeError('Expected Sticky to be mounted within StickyContainer');\n\n    _this.context.subscribe(_this.handleContainerEvent);\n\n    return _this;\n  }\n\n  _createClass(Sticky, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.context.unsubscribe(this.handleContainerEvent);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.placeholder.style.paddingBottom = this.props.disableCompensation ? 0 : \"\".concat(this.state.isSticky ? this.state.calculatedHeight : 0, \"px\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var element = React.cloneElement(this.props.children({\n        isSticky: this.state.isSticky,\n        wasSticky: this.state.wasSticky,\n        distanceFromTop: this.state.distanceFromTop,\n        distanceFromBottom: this.state.distanceFromBottom,\n        calculatedHeight: this.state.calculatedHeight,\n        style: this.state.style\n      }), {\n        ref: function ref(content) {\n          _this2.content = ReactDOM.findDOMNode(content);\n        }\n      });\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        ref: function ref(placeholder) {\n          return _this2.placeholder = placeholder;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 9\n        }\n      }), element);\n    }\n  }]);\n\n  return Sticky;\n}(Component);\n\n_defineProperty(Sticky, \"propTypes\", {\n  topOffset: PropTypes.number,\n  bottomOffset: PropTypes.number,\n  relative: PropTypes.bool,\n  children: PropTypes.func.isRequired\n});\n\n_defineProperty(Sticky, \"defaultProps\", {\n  relative: false,\n  topOffset: 0,\n  bottomOffset: 0,\n  disableCompensation: false,\n  disableHardwareAcceleration: false\n});\n\n_defineProperty(Sticky, \"contextTypes\", {\n  subscribe: PropTypes.func,\n  unsubscribe: PropTypes.func,\n  getParent: PropTypes.func\n});\n\nexport { Sticky as default };","map":{"version":3,"sources":["C:/Users/19215/Desktop/liuguanhua.github.io-master/liuguanhua.github.io/src/components/react-sticky/Sticky.js"],"names":["React","Component","ReactDOM","PropTypes","Sticky","props","context","isSticky","wasSticky","style","distanceFromTop","distanceFromBottom","eventSource","parent","getParent","preventingStickyStateChanges","relative","scrollTop","offsetTop","placeholder","placeholderClientRect","getBoundingClientRect","contentClientRect","content","calculatedHeight","height","bottomDifference","bottomOffset","state","topOffset","scrollHeight","position","top","offsetParent","left","width","disableHardwareAcceleration","transform","setState","subscribe","TypeError","handleContainerEvent","unsubscribe","paddingBottom","disableCompensation","element","cloneElement","children","ref","findDOMNode","number","bool","func","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport default class Sticky extends Component {\r\n  static propTypes = {\r\n    topOffset: PropTypes.number,\r\n    bottomOffset: PropTypes.number,\r\n    relative: PropTypes.bool,\r\n    children: PropTypes.func.isRequired,\r\n  }\r\n\r\n  static defaultProps = {\r\n    relative: false,\r\n    topOffset: 0,\r\n    bottomOffset: 0,\r\n    disableCompensation: false,\r\n    disableHardwareAcceleration: false,\r\n  }\r\n\r\n  static contextTypes = {\r\n    subscribe: PropTypes.func,\r\n    unsubscribe: PropTypes.func,\r\n    getParent: PropTypes.func,\r\n  }\r\n\r\n  state = {\r\n    isSticky: false,\r\n    wasSticky: false,\r\n    style: {},\r\n  }\r\n\r\n  constructor(props, context) {\r\n    super(props, context)\r\n    if (!this.context.subscribe)\r\n      throw new TypeError(\r\n        'Expected Sticky to be mounted within StickyContainer'\r\n      )\r\n\r\n    this.context.subscribe(this.handleContainerEvent)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.context.unsubscribe(this.handleContainerEvent)\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.placeholder.style.paddingBottom = this.props.disableCompensation\r\n      ? 0\r\n      : `${this.state.isSticky ? this.state.calculatedHeight : 0}px`\r\n  }\r\n\r\n  handleContainerEvent = ({\r\n    distanceFromTop,\r\n    distanceFromBottom,\r\n    eventSource,\r\n  }) => {\r\n    const parent = this.context.getParent()\r\n\r\n    let preventingStickyStateChanges = false\r\n    if (this.props.relative) {\r\n      preventingStickyStateChanges = eventSource !== parent\r\n      distanceFromTop =\r\n        -(eventSource.scrollTop + eventSource.offsetTop) +\r\n        this.placeholder.offsetTop\r\n    }\r\n\r\n    const placeholderClientRect = this.placeholder.getBoundingClientRect()\r\n    const contentClientRect = this.content.getBoundingClientRect()\r\n    const calculatedHeight = contentClientRect.height\r\n\r\n    const bottomDifference =\r\n      distanceFromBottom - this.props.bottomOffset - calculatedHeight\r\n\r\n    const wasSticky = !!this.state.isSticky\r\n    const isSticky = preventingStickyStateChanges\r\n      ? wasSticky\r\n      : distanceFromTop <= -this.props.topOffset &&\r\n        distanceFromBottom > -this.props.bottomOffset\r\n\r\n    distanceFromBottom =\r\n      (this.props.relative\r\n        ? parent.scrollHeight - parent.scrollTop\r\n        : distanceFromBottom) - calculatedHeight\r\n\r\n    const style = !isSticky\r\n      ? {}\r\n      : {\r\n          position: 'fixed',\r\n          top:\r\n            bottomDifference > 0\r\n              ? this.props.relative\r\n                ? parent.offsetTop - parent.offsetParent.scrollTop\r\n                : 0\r\n              : bottomDifference,\r\n          left: placeholderClientRect.left,\r\n          width: placeholderClientRect.width,\r\n        }\r\n\r\n    if (!this.props.disableHardwareAcceleration) {\r\n      style.transform = 'translateZ(0)'\r\n    }\r\n\r\n    this.setState({\r\n      isSticky,\r\n      wasSticky,\r\n      distanceFromTop,\r\n      distanceFromBottom,\r\n      calculatedHeight,\r\n      style,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const element = React.cloneElement(\r\n      this.props.children({\r\n        isSticky: this.state.isSticky,\r\n        wasSticky: this.state.wasSticky,\r\n        distanceFromTop: this.state.distanceFromTop,\r\n        distanceFromBottom: this.state.distanceFromBottom,\r\n        calculatedHeight: this.state.calculatedHeight,\r\n        style: this.state.style,\r\n      }),\r\n      {\r\n        ref: (content) => {\r\n          this.content = ReactDOM.findDOMNode(content)\r\n        },\r\n      }\r\n    )\r\n\r\n    return (\r\n      <div>\r\n        <div ref={(placeholder) => (this.placeholder = placeholder)} />\r\n        {element}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}