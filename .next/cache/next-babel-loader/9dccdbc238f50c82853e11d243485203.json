{"ast":null,"code":";\n!function (undefined) {\n  \"use strict\"; //使用严格的标准\n\n  var _global;\n  /**\r\n   * 2017-08-18\r\n   * @var star_r:star半径系数，值越大，半径越大；\r\n   * @var star_alpha:star透明度，值越大，越透明；建议取值在1-20之间，当star_alpha=20时，透明度在0.05-0.5之间；\r\n   * @var initStarNum:初始化star个数；\r\n   * @var move_distance:位移距离，即star向上跑的距离，数值越大，相同时间内，速度越快。\r\n   * @var dot_r:dot半径系数，值越大，半径越大；\r\n   * @var dot_alpha:dot透明度；\r\n   * @var dot_speed:dot运动速度；\r\n   * @var dot_vanish:dot消失条件，透明度小于vanish时消失；\r\n   * @var dot_mindis:dot最小距离；\r\n   * @var dot_maxdis:dot最大距离；\r\n   */\n\n\n  var config = {\n    star_r: 7,\n    star_alpha: 1,\n    initStarNum: 200,\n    move_distance: 0.25,\n    dot_r: 10,\n    dot_alpha: 0.4,\n    dot_speed: 0.5,\n    dot_vanish: 0.01,\n    dot_mindis: 5,\n    dot_maxdis: 50\n  };\n  var canvas = document.getElementById(\"canvas\"),\n      ctx = canvas.getContext(\"2d\"),\n      W = document.documentElement.clientWidth,\n      H = document.documentElement.clientHeight,\n      mouseMoving = false,\n      mouseMoveChecker,\n      mouseX,\n      mouseY,\n      stars = [],\n      dots = [];\n  var colorArr = [\"#F9112D\", \"#EA109D\", \"#540CC7\", \"#D0D4DE\", \"#0DBAC7\", \"#06764A\", \"#64C70F\", \"#EEDF1B\", \"#F47E20\"];\n\n  function CanvasStar() {}\n\n  ;\n  canvas.width = W;\n  canvas.height = H;\n  canvas.style.cssText = \"position:fixed;left:0;right:0;top:0;bottom:0;z-index:-1;\"; //设置初始化参数\n\n  function initConfig(conf) {\n    if (conf instanceof Object) {\n      for (var key in conf) {\n        config[key] = conf[key];\n      }\n    }\n  }\n\n  CanvasStar.prototype.init = function (conf) {\n    initConfig(conf); // ctx.fillstyle=\"white\";\n    // ctx.shadowColor=\"white\";\n    // ctx.shadowBlur=0;\n\n    for (var i = 0; i < config.initStarNum; i++) {\n      stars[i] = new Star(i, Math.floor(Math.random() * W), Math.floor(Math.random() * H), true);\n    }\n\n    animate();\n  };\n  /**\r\n   * [Star 设置单个star]\r\n   * @param {[type]} id       [id]\r\n   * @param {[type]} x        [x坐标]\r\n   * @param {[type]} y        [y坐标]\r\n   * @param {[type]} useCache [是否使用缓存]\r\n   */\n\n\n  function Star(id, x, y, useCache) {\n    this.id = id;\n    this.x = x;\n    this.y = y;\n    this.useCache = useCache;\n    this.cacheCns = document.createElement(\"canvas\");\n    this.cacheCtx = this.cacheCns.getContext(\"2d\");\n    this.r = Math.floor(Math.random() * config.star_r + 1);\n    this.cacheCns.width = 7 * this.r;\n    this.cacheCns.height = 7 * this.r;\n    this.alpha = Math.floor(Math.random() * 10 + 1) / config.star_alpha;\n    this.color = \"rgba(255,255,255,\" + this.alpha + \")\";\n\n    if (useCache) {\n      this.cache();\n    }\n  }\n\n  var colorNum = 0;\n  Star.prototype = {\n    draw: function draw() {\n      //非缓存的情况\n      if (!this.useCache) {\n        colorNum++;\n        ctx.save(); // ctx.fillStyle=this.color;\n\n        ctx.fillStyle = colorArr[colorNum % 9];\n        ctx.shadowColor = \"white\";\n        ctx.shadowBlur = 1;\n        ctx.beginPath(); // ctx.arc(this.x,this.y,this.r,0,2*Math.PI,true);\n\n        var dit = Math.PI * 4 / 5;\n        var sin = Math.sin(0) * this.r + this.y;\n        var cos = Math.cos(0) * this.r + this.x;\n        ctx.moveTo(cos, sin);\n\n        for (var i = 0; i < 5; i++) {\n          var tempDit = dit * i;\n          sin = Math.sin(tempDit) * this.r + this.y;\n          cos = Math.cos(tempDit) * this.r + this.x;\n          ctx.lineTo(cos, sin);\n        }\n\n        ctx.closePath();\n        ctx.fill();\n        ctx.restore();\n      } else {\n        ctx.drawImage(this.cacheCns, this.x - this.r, this.y - this.r);\n      }\n    },\n    cache: function cache() {\n      colorNum++;\n      this.cacheCtx.save();\n      this.cacheCtx.fillStyle = colorArr[colorNum % 9]; // this.cacheCtx.fillStyle=this.color;\n\n      this.cacheCtx.shadowColor = \"white\";\n      this.cacheCtx.shadowBlur = 0;\n      this.cacheCtx.beginPath(); // this.cacheCtx.arc(this.r*3,this.r*3,this.r,0,2*Math.PI,true);\n\n      var dit = Math.PI * 4 / 5;\n      var sin = Math.sin(0) * this.r + this.r * 3;\n      var cos = Math.cos(0) * this.r + this.r * 3;\n      this.cacheCtx.moveTo(cos, sin);\n\n      for (var i = 0; i < 5; i++) {\n        var tempDit = dit * i;\n        sin = Math.sin(tempDit) * this.r + this.r * 3;\n        cos = Math.cos(tempDit) * this.r + this.r * 3;\n        this.cacheCtx.lineTo(cos, sin);\n      }\n\n      this.cacheCtx.closePath();\n      this.cacheCtx.fill();\n      this.cacheCtx.restore();\n    },\n    move: function move() {\n      this.y -= config.move_distance;\n\n      if (this.y <= -10) {\n        this.y = H + 10;\n      }\n\n      this.draw();\n    },\n    die: function die() {\n      stars[this.id] = null;\n      stars.splice(this.id, 1); // delete stars[this.id];\n    }\n  };\n\n  function Dot(id, x, y, useCache) {\n    this.id = id;\n    this.x = x;\n    this.y = y;\n    this.useCache = useCache;\n    this.dotCns = document.createElement(\"canvas\");\n    this.dotCtx = this.dotCns.getContext(\"2d\");\n    this.r = Math.floor(Math.random() * config.dot_r + 1); // this.dotCns.width=7*this.r;\n    // this.dotCns.height=7*this.r;\n\n    this.speed = config.dot_speed;\n    this.vanish = config.dot_vanish;\n    this.alpha = config.dot_alpha; //线\n\n    this.dotCtx.alpha = 0.7; //点\n\n    this.color = \"rgba(255,255,255,\" + this.alpha + \")\";\n    this.dotCtx.color = \"rgba(255,255,255,\" + this.dotCtx.alpha + \")\";\n    this.dir = Math.floor(Math.random() * 140) + 200;\n\n    if (useCache) {\n      this.cache();\n    }\n  }\n\n  Dot.prototype = {\n    draw: function draw() {\n      if (!this.useCache) {\n        colorNum++;\n        ctx.save();\n        ctx.fillStyle = colorArr[colorNum % 9]; // ctx.fillStyle=this.dotCtx.color;\n\n        ctx.shadowBlur = 1;\n        ctx.shadowColor = \"white\";\n        ctx.beginPath(); // ctx.arc(this.x,this.y,this.r,0,2*Math.PI,true);\n\n        var dit = Math.PI * 4 / 5;\n        var sin = Math.sin(0) * this.r + this.y;\n        var cos = Math.cos(0) * this.r + this.x;\n        ctx.moveTo(cos, sin);\n\n        for (var i = 0; i < 5; i++) {\n          var tempDit = dit * i;\n          sin = Math.sin(tempDit) * this.r + this.y;\n          cos = Math.cos(tempDit) * this.r + this.x;\n          ctx.lineTo(cos, sin);\n        }\n\n        ctx.closePath();\n        ctx.fill();\n        ctx.restore();\n      } else {\n        ctx.drawImage(this.dotCns, this.x - this.r * 3, this.y - this.r * 3);\n      }\n    },\n    cache: function cache() {\n      colorNum++;\n      this.dotCtx.save();\n      this.dotCtx.alpha -= this.vanish;\n      this.dotCtx.color = colorArr[colorNum % 9]; // this.dotCtx.color = \"rgba(255,255,255,\" + this.dotCtx.alpha + \")\";\n\n      this.dotCtx.fillStyle = this.dotCtx.color;\n      this.dotCtx.shadowColor = \"white\";\n      this.dotCtx.shadowBlur = 1;\n      this.dotCtx.beginPath(); // this.dotCtx.arc(this.r*3,this.r*3,this.r,0,2*Math.PI,true);\n\n      var dit = Math.PI * 4 / 5;\n      var sin = Math.sin(0) * this.r + this.r * 3;\n      var cos = Math.cos(0) * this.r + this.r * 3;\n      this.dotCtx.moveTo(cos, sin);\n\n      for (var i = 0; i < 5; i++) {\n        var tempDit = dit * i;\n        sin = Math.sin(tempDit) * this.r + this.r * 3;\n        cos = Math.cos(tempDit) * this.r + this.r * 3;\n        this.dotCtx.lineTo(cos, sin);\n      }\n\n      this.dotCtx.closePath();\n      this.dotCtx.fill();\n      this.dotCtx.restore();\n    },\n    line: function line() {\n      if (this.id == 0) return;\n      var previousDot1 = getPreviousDot(this.id, 1);\n      var previousDot2 = getPreviousDot(this.id, 2);\n      var previousDot3 = getPreviousDot(this.id, 3);\n      var previousDot4 = getPreviousDot(this.id, 4);\n      if (!previousDot1) return;\n      ctx.strokeStyle = this.color;\n      ctx.moveTo(previousDot1.x, previousDot1.y);\n      ctx.beginPath();\n      ctx.lineTo(this.x, this.y);\n      if (previousDot2 != false) ctx.lineTo(previousDot2.x, previousDot2.y);\n      if (previousDot3 != false) ctx.lineTo(previousDot3.x, previousDot3.y);\n      if (previousDot4 != false) ctx.lineTo(previousDot4.x, previousDot4.y);\n      ctx.stroke();\n      ctx.closePath();\n    },\n    move: function move() {\n      this.alpha -= this.vanish;\n\n      if (this.alpha <= 0) {\n        this.die();\n        return;\n      }\n\n      this.dotCtx.alpha -= this.vanish;\n      this.color = \"rgba(255,255,255,\" + this.alpha + \")\";\n      this.dotCtx.color = \"rgba(255,255,255,\" + this.dotCtx.alpha + \")\";\n      this.x = this.x + Math.cos(this.dir * (Math.PI / 180)) * this.speed;\n      this.y = this.y + Math.sin(this.dir * (Math.PI / 180)) * this.speed;\n      this.draw();\n      this.line();\n    },\n    die: function die() {\n      dots[this.id] = null; // dots.splice(this.id,1);\n\n      delete dots[this.id];\n    }\n  };\n\n  function getPreviousDot(id, step) {\n    if (id == 0 || id - step < 0) return false;\n\n    if (typeof dots[id - step] !== \"undefined\") {\n      return dots[id - step];\n    } else {\n      return false;\n    }\n  }\n\n  document.onmousemove = function (e) {\n    var e = e || event;\n    mouseMoving = true;\n    mouseX = e.clientX;\n    mouseY = e.clientY; // clearInterval(mouseMoveChecker);\n    // mouseMoveChecker = setInterval(function () {\n    // \tmouseMoving = false;\n    // },100)\n  };\n\n  function drawIfMouseMoving() {\n    if (!mouseMoving) return;\n\n    if (dots.length == 0) {\n      dots[0] = new Dot(0, mouseX, mouseY, true);\n      dots[0].draw();\n      return;\n    }\n\n    var previousDot = getPreviousDot(dots.length, 1);\n    var diffX = Math.abs(previousDot.x - mouseX);\n    var diffY = Math.abs(previousDot.y - mouseY);\n    if (diffX < config.dot_mindis || diffY < config.dot_mindis) return;\n    var randomX = Math.random() > 0.5 ? -1 : 1;\n    randomX = randomX * Math.floor(Math.random() * config.dot_maxdis + 1);\n    var randomY = Math.random() > 0.5 ? -1 : 1;\n    randomY = randomY * Math.floor(Math.random() * config.dot_maxdis + 1);\n    dots[dots.length] = new Dot(dots.length, mouseX + randomX, mouseY + randomY, true);\n    dots[dots.length - 1].draw();\n    dots[dots.length - 1].line();\n  }\n\n  function animate() {\n    ctx.clearRect(0, 0, W, H);\n\n    for (var i in stars) {\n      stars[i].move();\n    }\n\n    for (var i in dots) {\n      dots[i].move();\n    }\n\n    drawIfMouseMoving();\n    requestAnimationFrame(animate);\n  } //最后把插件暴露给全局对象\n\n\n  _global = function () {\n    return this || (0, eval)(\"this\");\n  }();\n\n  if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = CanvasStar;\n  } else if (typeof define === \"function\" && define.amd) {\n    define(function () {\n      return CanvasStar;\n    });\n  } else {\n    !(\"CanvasStar\" in _global) && (_global.CanvasStar = CanvasStar);\n  }\n}();","map":{"version":3,"sources":["C:/Users/19215/Desktop/mywebsite/src/components/react-sticky/canvasStar.js"],"names":["undefined","_global","config","star_r","star_alpha","initStarNum","move_distance","dot_r","dot_alpha","dot_speed","dot_vanish","dot_mindis","dot_maxdis","canvas","document","getElementById","ctx","getContext","W","documentElement","clientWidth","H","clientHeight","mouseMoving","mouseMoveChecker","mouseX","mouseY","stars","dots","colorArr","CanvasStar","width","height","style","cssText","initConfig","conf","Object","key","prototype","init","i","Star","Math","floor","random","animate","id","x","y","useCache","cacheCns","createElement","cacheCtx","r","alpha","color","cache","colorNum","draw","save","fillStyle","shadowColor","shadowBlur","beginPath","dit","PI","sin","cos","moveTo","tempDit","lineTo","closePath","fill","restore","drawImage","move","die","splice","Dot","dotCns","dotCtx","speed","vanish","dir","line","previousDot1","getPreviousDot","previousDot2","previousDot3","previousDot4","strokeStyle","stroke","step","onmousemove","e","event","clientX","clientY","drawIfMouseMoving","length","previousDot","diffX","abs","diffY","randomX","randomY","clearRect","requestAnimationFrame","eval","module","exports","define","amd"],"mappings":"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","sourcesContent":[";!function(undefined){\r\n\t\"use strict\";//使用严格的标准\r\n\tvar _global;\r\n\t/**\r\n\t * 2017-08-18\r\n\t * @var star_r:star半径系数，值越大，半径越大；\r\n\t * @var star_alpha:star透明度，值越大，越透明；建议取值在1-20之间，当star_alpha=20时，透明度在0.05-0.5之间；\r\n\t * @var initStarNum:初始化star个数；\r\n\t * @var move_distance:位移距离，即star向上跑的距离，数值越大，相同时间内，速度越快。\r\n\t * @var dot_r:dot半径系数，值越大，半径越大；\r\n\t * @var dot_alpha:dot透明度；\r\n\t * @var dot_speed:dot运动速度；\r\n\t * @var dot_vanish:dot消失条件，透明度小于vanish时消失；\r\n\t * @var dot_mindis:dot最小距离；\r\n\t * @var dot_maxdis:dot最大距离；\r\n\t */\r\n\t var config={\r\n\t \tstar_r:7,\r\n\t \tstar_alpha:1,\r\n\t \tinitStarNum:200,\r\n\t \tmove_distance:0.25,\r\n\t \tdot_r:10,\r\n\t \tdot_alpha:0.4,\r\n\t \tdot_speed:0.5,\r\n\t \tdot_vanish:0.01,\r\n\t \tdot_mindis:5,\r\n\t \tdot_maxdis:50\r\n\t };\r\n\t var canvas=document.getElementById(\"canvas\"),\r\n\t ctx=canvas.getContext(\"2d\"),\r\n\t W=document.documentElement.clientWidth,\r\n\t H=document.documentElement.clientHeight,\r\n\t mouseMoving=false,\r\n\t mouseMoveChecker,\r\n\t mouseX,\r\n\t mouseY,\r\n\t stars=[],\r\n\t dots=[];\r\n\t var colorArr=[\"#F9112D\",\"#EA109D\",\"#540CC7\",\"#D0D4DE\",\"#0DBAC7\",\"#06764A\",\"#64C70F\",\"#EEDF1B\",\"#F47E20\"];\r\n\t function CanvasStar(){};\r\n\t canvas.width=W;\r\n\t canvas.height=H;\r\n\t canvas.style.cssText=\"position:fixed;left:0;right:0;top:0;bottom:0;z-index:-1;\";\r\n\t//设置初始化参数\r\n\tfunction initConfig(conf){\r\n\t\tif(conf instanceof Object){\r\n\t\t\tfor(var key in conf){\r\n\t\t\t\tconfig[key]=conf[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tCanvasStar.prototype.init=function(conf){\r\n\t\tinitConfig(conf);\r\n\t\t// ctx.fillstyle=\"white\";\r\n\t\t// ctx.shadowColor=\"white\";\r\n\t\t// ctx.shadowBlur=0;\r\n\t\tfor(var i=0;i<config.initStarNum;i++){\r\n\t\t\tstars[i]=new Star(i,Math.floor(Math.random()*W),Math.floor(Math.random()*H),true);\r\n\t\t}\r\n\t\tanimate();\r\n\t};\r\n\t/**\r\n\t * [Star 设置单个star]\r\n\t * @param {[type]} id       [id]\r\n\t * @param {[type]} x        [x坐标]\r\n\t * @param {[type]} y        [y坐标]\r\n\t * @param {[type]} useCache [是否使用缓存]\r\n\t */\r\n\t function Star(id,x,y,useCache){\r\n\t \tthis.id=id;\r\n\t \tthis.x=x;\r\n\t \tthis.y=y;\r\n\t \tthis.useCache=useCache;\r\n\t \tthis.cacheCns=document.createElement(\"canvas\");\r\n\t \tthis.cacheCtx=this.cacheCns.getContext(\"2d\");\r\n\t \tthis.r=Math.floor(Math.random()*config.star_r+1);\r\n\t \tthis.cacheCns.width=7*this.r;\r\n\t \tthis.cacheCns.height=7*this.r;\r\n\t \tthis.alpha=Math.floor(Math.random()*10+1)/config.star_alpha;\r\n\t \tthis.color=\"rgba(255,255,255,\"+this.alpha+\")\";\r\n\t \tif(useCache){\r\n\t \t\tthis.cache();\r\n\t \t}\r\n\t }\r\n\t var colorNum=0;\r\n\t Star.prototype={\r\n\t \tdraw:function(){\r\n\t\t\t//非缓存的情况\r\n\t\t\tif(!this.useCache){\r\n\t\t\t\tcolorNum++;\r\n\t\t\t\tctx.save();\r\n\t\t\t\t// ctx.fillStyle=this.color;\r\n\t\t\t\tctx.fillStyle=colorArr[colorNum%9];\r\n\t\t\t\tctx.shadowColor=\"white\";\r\n\t\t\t\tctx.shadowBlur=1;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\t// ctx.arc(this.x,this.y,this.r,0,2*Math.PI,true);\r\n\t\t\t\tvar dit = Math.PI * 4 / 5;\r\n\t\t\t\tvar sin = Math.sin(0) * this.r + this.y;\r\n\t\t\t\tvar cos = Math.cos(0) * this.r + this.x;\r\n\t\t\t\tctx.moveTo(cos, sin);\r\n\t\t\t\tfor (var i = 0; i < 5; i++) {\r\n\t\t\t\t\tvar tempDit = dit * i;\r\n\t\t\t\t\tsin = Math.sin(tempDit) * this.r + this.y;\r\n\t\t\t\t\tcos = Math.cos(tempDit) * this.r + this.x;\r\n\t\t\t\t\tctx.lineTo(cos, sin);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}else{\r\n\t\t\t\tctx.drawImage(this.cacheCns, this.x-this.r,this.y-this.r);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tcache:function(){\r\n\t\t\tcolorNum++;\r\n\r\n\t\t\tthis.cacheCtx.save();\r\n\t\t\tthis.cacheCtx.fillStyle=colorArr[colorNum%9];\r\n\t\t\t// this.cacheCtx.fillStyle=this.color;\r\n\t\t\tthis.cacheCtx.shadowColor=\"white\";\r\n\t\t\tthis.cacheCtx.shadowBlur=0;\r\n\t\t\tthis.cacheCtx.beginPath();\r\n\t\t\t// this.cacheCtx.arc(this.r*3,this.r*3,this.r,0,2*Math.PI,true);\r\n\t\t\tvar dit = Math.PI * 4 / 5;\r\n\t\t\tvar sin = Math.sin(0) * this.r + this.r*3;\r\n\t\t\tvar cos = Math.cos(0) * this.r + this.r*3;\r\n\t\t\tthis.cacheCtx.moveTo(cos, sin);\r\n\t\t\tfor (var i = 0; i < 5; i++) {\r\n\t\t\t\tvar tempDit = dit * i;\r\n\t\t\t\tsin = Math.sin(tempDit) * this.r + this.r*3;\r\n\t\t\t\tcos = Math.cos(tempDit) * this.r + this.r*3;\r\n\t\t\t\tthis.cacheCtx.lineTo(cos, sin);\r\n\r\n\t\t\t}\r\n\t\t\tthis.cacheCtx.closePath();\r\n\t\t\tthis.cacheCtx.fill();\r\n\t\t\tthis.cacheCtx.restore();\r\n\t\t},\r\n\t\tmove:function(){\r\n\t\t\tthis.y -= config.move_distance;\r\n\t\t\tif(this.y<=-10){\r\n\t\t\t\tthis.y=H+10;\r\n\t\t\t}\r\n\t\t\tthis.draw();\r\n\t\t},\r\n\t\tdie:function(){\r\n\t\t\tstars[this.id]=null;\r\n\t\t\tstars.splice(this.id,1);\r\n\t\t\t// delete stars[this.id];\r\n\t\t}\r\n\t}\r\n\tfunction Dot(id,x,y,useCache){\r\n\t\tthis.id=id;\r\n\t\tthis.x=x;\r\n\t\tthis.y=y;\r\n\t\tthis.useCache=useCache;\r\n\t\tthis.dotCns=document.createElement(\"canvas\");\r\n\t\tthis.dotCtx=this.dotCns.getContext(\"2d\");\r\n\t\tthis.r=Math.floor(Math.random()*config.dot_r+1);\r\n\t \t// this.dotCns.width=7*this.r;\r\n\t \t// this.dotCns.height=7*this.r;\r\n\t \tthis.speed=config.dot_speed;\r\n\t \tthis.vanish=config.dot_vanish;\r\n\t \tthis.alpha=config.dot_alpha;//线\r\n\t \tthis.dotCtx.alpha=0.7;\t\t//点\r\n\t \tthis.color=\"rgba(255,255,255,\"+this.alpha+\")\";\r\n\t \tthis.dotCtx.color=\"rgba(255,255,255,\"+this.dotCtx.alpha+\")\";\r\n\t \tthis.dir=Math.floor(Math.random()*140)+200;\r\n\t \tif(useCache){\r\n\t \t\tthis.cache();\r\n\t \t}\r\n\t }\r\n\t Dot.prototype={\r\n\t \tdraw:function(){\r\n\t \t\tif(!this.useCache){\r\n\t \t\t\tcolorNum++;\r\n\t \t\t\tctx.save();\r\n\t \t\t\tctx.fillStyle=colorArr[colorNum%9];\r\n\t\t\t\t// ctx.fillStyle=this.dotCtx.color;\r\n\t\t\t\tctx.shadowBlur=1;\r\n\t\t\t\tctx.shadowColor=\"white\";\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\t// ctx.arc(this.x,this.y,this.r,0,2*Math.PI,true);\r\n\t\t\t\tvar dit = Math.PI * 4 / 5;\r\n\t\t\t\tvar sin = Math.sin(0) * this.r + this.y;\r\n\t\t\t\tvar cos = Math.cos(0) * this.r + this.x;\r\n\t\t\t\tctx.moveTo(cos, sin);\r\n\t\t\t\tfor (var i = 0; i < 5; i++) {\r\n\t\t\t\t\tvar tempDit = dit * i;\r\n\t\t\t\t\tsin = Math.sin(tempDit) * this.r + this.y;\r\n\t\t\t\t\tcos = Math.cos(tempDit) * this.r + this.x;\r\n\t\t\t\t\tctx.lineTo(cos, sin);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}else{\r\n\t\t\t\tctx.drawImage(this.dotCns, this.x-this.r*3,this.y-this.r*3);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcache:function(){\r\n\t\t\tcolorNum++;\r\n\t\t\tthis.dotCtx.save();\r\n\t\t\tthis.dotCtx.alpha -= this.vanish;\r\n\t\t\tthis.dotCtx.color = colorArr[colorNum%9];\r\n\t\t\t// this.dotCtx.color = \"rgba(255,255,255,\" + this.dotCtx.alpha + \")\";\r\n\t\t\tthis.dotCtx.fillStyle=this.dotCtx.color;\r\n\t\t\tthis.dotCtx.shadowColor=\"white\";\r\n\t\t\tthis.dotCtx.shadowBlur=1;\r\n\t\t\tthis.dotCtx.beginPath();\r\n\t\t\t// this.dotCtx.arc(this.r*3,this.r*3,this.r,0,2*Math.PI,true);\r\n\t\t\tvar dit = Math.PI * 4 / 5;\r\n\t\t\tvar sin = Math.sin(0) * this.r + this.r*3;\r\n\t\t\tvar cos = Math.cos(0) * this.r + this.r*3;\r\n\t\t\tthis.dotCtx.moveTo(cos, sin);\r\n\t\t\tfor (var i = 0; i < 5; i++) {\r\n\t\t\t\tvar tempDit = dit * i;\r\n\t\t\t\tsin = Math.sin(tempDit) * this.r + this.r*3;\r\n\t\t\t\tcos = Math.cos(tempDit) * this.r + this.r*3;\r\n\t\t\t\tthis.dotCtx.lineTo(cos, sin);\r\n\r\n\t\t\t}\r\n\t\t\tthis.dotCtx.closePath();\r\n\t\t\tthis.dotCtx.fill();\r\n\t\t\tthis.dotCtx.restore();\r\n\t\t},\r\n\t\tline:function(){\r\n\t\t\tif(this.id==0)return;\r\n\t\t\tvar previousDot1=getPreviousDot(this.id,1);\r\n\t\t\tvar previousDot2=getPreviousDot(this.id,2);\r\n\t\t\tvar previousDot3=getPreviousDot(this.id,3);\r\n\t\t\tvar previousDot4=getPreviousDot(this.id,4);\r\n\t\t\tif(!previousDot1)return;\r\n\t\t\tctx.strokeStyle=this.color;\r\n\t\t\tctx.moveTo(previousDot1.x,previousDot1.y);\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.lineTo(this.x, this.y);\r\n\t\t\tif(previousDot2 !=false) ctx.lineTo(previousDot2.x,previousDot2.y);\r\n\t\t\tif(previousDot3 !=false) ctx.lineTo(previousDot3.x,previousDot3.y);\r\n\t\t\tif(previousDot4 !=false) ctx.lineTo(previousDot4.x,previousDot4.y);\r\n\t\t\tctx.stroke();\r\n\t\t\tctx.closePath();\r\n\t\t},\r\n\t\tmove:function(){\r\n\t\t\tthis.alpha -=this.vanish;\r\n\t\t\tif(this.alpha<=0){\r\n\t\t\t\tthis.die();\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tthis.dotCtx.alpha -= this.vanish;\r\n\t\t\tthis.color=\"rgba(255,255,255,\"+this.alpha+\")\";\r\n\t\t\tthis.dotCtx.color=\"rgba(255,255,255,\"+this.dotCtx.alpha+\")\";\r\n\t\t\tthis.x=this.x+Math.cos(this.dir*(Math.PI/180))*this.speed;\r\n\t\t\tthis.y=this.y+Math.sin(this.dir*(Math.PI/180))*this.speed;\r\n\t\t\tthis.draw();\r\n\t\t\tthis.line();\r\n\t\t},\r\n\t\tdie:function(){\r\n\t\t\tdots[this.id]=null;\r\n\t\t\t// dots.splice(this.id,1);\r\n\t\t\tdelete dots[this.id];\r\n\t\t}\r\n\t}\r\n\tfunction getPreviousDot(id,step){\r\n\t\tif(id==0 || id-step<0)return false;\r\n\t\tif(typeof dots[id-step] !==\"undefined\"){\r\n\t\t\treturn dots[id-step];\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tdocument.onmousemove=function(e){\r\n\t\tvar e=e||event;\r\n\t\tmouseMoving=true;\r\n\t\tmouseX=e.clientX;\r\n\t\tmouseY=e.clientY;\r\n\t\t// clearInterval(mouseMoveChecker);\r\n\t\t// mouseMoveChecker = setInterval(function () {\r\n\t\t// \tmouseMoving = false;\r\n\t\t// },100)\r\n\t}\r\n\tfunction drawIfMouseMoving(){\r\n\t\tif(!mouseMoving)return;\r\n\t\tif(dots.length==0){\r\n\t\t\tdots[0]=new Dot(0,mouseX,mouseY,true);\r\n\t\t\tdots[0].draw();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar previousDot=getPreviousDot(dots.length,1);\r\n\t\tvar diffX=Math.abs(previousDot.x-mouseX);\r\n\t\tvar diffY=Math.abs(previousDot.y-mouseY);\r\n\t\tif(diffX<config.dot_mindis || diffY<config.dot_mindis)return;\r\n\t\tvar randomX=Math.random()>0.5?-1:1;\r\n\t\trandomX=randomX*Math.floor(Math.random()*config.dot_maxdis+1);\r\n\t\tvar randomY=Math.random()>0.5?-1:1;\r\n\t\trandomY=randomY*Math.floor(Math.random()*config.dot_maxdis+1);\r\n\t\tdots[dots.length]=new Dot(dots.length,mouseX+randomX,mouseY+randomY,true);\r\n\t\tdots[dots.length-1].draw();\r\n\t\tdots[dots.length-1].line();\r\n\t}\r\n\r\n\tfunction animate(){\r\n\t\tctx.clearRect(0,0,W,H);\r\n\t\tfor(var i in stars){\r\n\t\t\tstars[i].move();\r\n\t\t}\r\n\t\tfor(var i in dots){\r\n\t\t\tdots[i].move();\r\n\t\t}\r\n\t\tdrawIfMouseMoving();\r\n\t\trequestAnimationFrame(animate);\r\n\t}\r\n\r\n\t//最后把插件暴露给全局对象\r\n\t_global=(function(){return this || (0,eval)(\"this\");}());\r\n\tif(typeof module !==\"undefined\" && module.exports){\r\n\t\tmodule.exports=CanvasStar;\r\n\t}else if(typeof define===\"function\" && define.amd){\r\n\t\tdefine(function(){return CanvasStar;});\r\n\t}else{\r\n\t\t!(\"CanvasStar\" in _global) && (_global.CanvasStar=CanvasStar);\r\n\t}\r\n\r\n}();"]},"metadata":{},"sourceType":"script"}