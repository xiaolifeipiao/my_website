{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\19215\\\\Desktop\\\\liuguanhua.github.io-master\\\\liuguanhua.github.io\\\\src\\\\components\\\\react-sticky\\\\Container.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport raf from \"raf\";\n\nvar Container = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Container, _PureComponent);\n\n  var _super = _createSuper(Container);\n\n  function Container() {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"events\", [\"resize\", \"scroll\", \"touchstart\", \"touchmove\", \"touchend\", \"pageshow\", \"load\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"subscribers\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"rafHandle\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"subscribe\", function (handler) {\n      _this.subscribers = _this.subscribers.concat(handler);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", function (handler) {\n      _this.subscribers = _this.subscribers.filter(function (current) {\n        return current !== handler;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"notifySubscribers\", function (evt) {\n      if (!_this.framePending) {\n        var currentTarget = evt.currentTarget;\n        _this.rafHandle = raf(function () {\n          _this.framePending = false;\n\n          var _this$node$getBoundin = _this.node.getBoundingClientRect(),\n              top = _this$node$getBoundin.top,\n              bottom = _this$node$getBoundin.bottom;\n\n          _this.subscribers.forEach(function (handler) {\n            return handler({\n              distanceFromTop: top,\n              distanceFromBottom: bottom,\n              eventSource: currentTarget === window ? document.body : _this.node\n            });\n          });\n        });\n        _this.framePending = true;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getParent\", function () {\n      return _this.node;\n    });\n\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return {\n        subscribe: this.subscribe,\n        unsubscribe: this.unsubscribe,\n        getParent: this.getParent\n      };\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return window.addEventListener(event, _this2.notifySubscribers);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this3 = this;\n\n      if (this.rafHandle) {\n        raf.cancel(this.rafHandle);\n        this.rafHandle = null;\n      }\n\n      this.events.forEach(function (event) {\n        return window.removeEventListener(event, _this3.notifySubscribers);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return __jsx(\"div\", _extends({}, this.props, {\n        ref: function ref(node) {\n          return _this4.node = node;\n        },\n        onScroll: this.notifySubscribers,\n        onTouchStart: this.notifySubscribers,\n        onTouchMove: this.notifySubscribers,\n        onTouchEnd: this.notifySubscribers,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 7\n        }\n      }));\n    }\n  }]);\n\n  return Container;\n}(PureComponent);\n\n_defineProperty(Container, \"childContextTypes\", {\n  subscribe: PropTypes.func,\n  unsubscribe: PropTypes.func,\n  getParent: PropTypes.func\n});\n\nexport { Container as default };","map":{"version":3,"sources":["C:/Users/19215/Desktop/liuguanhua.github.io-master/liuguanhua.github.io/src/components/react-sticky/Container.js"],"names":["React","PureComponent","PropTypes","raf","Container","handler","subscribers","concat","filter","current","evt","framePending","currentTarget","rafHandle","node","getBoundingClientRect","top","bottom","forEach","distanceFromTop","distanceFromBottom","eventSource","window","document","body","subscribe","unsubscribe","getParent","events","event","addEventListener","notifySubscribers","cancel","removeEventListener","props","func"],"mappings":"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","sourcesContent":["import React, { PureComponent } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport raf from \"raf\";\r\n\r\nexport default class Container extends PureComponent {\r\n  static childContextTypes = {\r\n    subscribe: PropTypes.func,\r\n    unsubscribe: PropTypes.func,\r\n    getParent: PropTypes.func\r\n  };\r\n\r\n  getChildContext() {\r\n    return {\r\n      subscribe: this.subscribe,\r\n      unsubscribe: this.unsubscribe,\r\n      getParent: this.getParent\r\n    };\r\n  }\r\n\r\n  events = [\r\n    \"resize\",\r\n    \"scroll\",\r\n    \"touchstart\",\r\n    \"touchmove\",\r\n    \"touchend\",\r\n    \"pageshow\",\r\n    \"load\"\r\n  ];\r\n\r\n  subscribers = [];\r\n\r\n  rafHandle = null;\r\n\r\n  subscribe = handler => {\r\n    this.subscribers = this.subscribers.concat(handler);\r\n  };\r\n\r\n  unsubscribe = handler => {\r\n    this.subscribers = this.subscribers.filter(current => current !== handler);\r\n  };\r\n\r\n  notifySubscribers = evt => {\r\n    if (!this.framePending) {\r\n      const { currentTarget } = evt;\r\n\r\n      this.rafHandle = raf(() => {\r\n        this.framePending = false;\r\n        const { top, bottom } = this.node.getBoundingClientRect();\r\n\r\n        this.subscribers.forEach(handler =>\r\n          handler({\r\n            distanceFromTop: top,\r\n            distanceFromBottom: bottom,\r\n            eventSource: currentTarget === window ? document.body : this.node\r\n          })\r\n        );\r\n      });\r\n      this.framePending = true;\r\n    }\r\n  };\r\n\r\n  getParent = () => this.node;\r\n\r\n  componentDidMount() {\r\n    this.events.forEach(event =>\r\n      window.addEventListener(event, this.notifySubscribers)\r\n    );\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.rafHandle) {\r\n      raf.cancel(this.rafHandle);\r\n      this.rafHandle = null;\r\n    }\r\n\r\n    this.events.forEach(event =>\r\n      window.removeEventListener(event, this.notifySubscribers)\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        {...this.props}\r\n        ref={node => (this.node = node)}\r\n        onScroll={this.notifySubscribers}\r\n        onTouchStart={this.notifySubscribers}\r\n        onTouchMove={this.notifySubscribers}\r\n        onTouchEnd={this.notifySubscribers}\r\n      />\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}