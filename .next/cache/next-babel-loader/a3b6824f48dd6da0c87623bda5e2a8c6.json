{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport store from 'store';\nimport { isObject, isArray } from 'util';\nimport { Random } from 'mockjs';\nimport { getWindowWidthHeight } from '../helper';\nimport { DEFAULT_PAGE_SIZE, PARAMS_ERROR } from '../constant';\n\nrequire('@root/config');\n\nexport var globalSelf = function () {\n  return true ? window : global;\n}();\n/**\r\n * 生成一定长度的数组\r\n * @param {number} [num=0]\r\n */\n\nexport var generateNumList = function generateNumList() {\n  var num = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return _toConsumableArray(Array(num).keys());\n};\n/**\r\n * 滚动到具体位置\r\n * @param {number} [scrollHeight=getWindowWidthHeight().height]\r\n */\n\nexport var scrollToFixedLocate = function scrollToFixedLocate() {\n  var scrollHeight = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getWindowWidthHeight().height;\n  window.scrollTo({\n    top: scrollHeight,\n    behavior: 'smooth'\n  });\n};\nexport var isValidArray = function isValidArray(data) {\n  return isArray(data) && Boolean(data.length);\n};\nexport var getStorage = function getStorage(key) {\n  var isDefaultEmptyObject = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var storeData = IS_CLIENT ? store.get(key) : {};\n  return storeData || (isDefaultEmptyObject ? {} : void 0);\n};\nexport var setStorage = function setStorage(key, value) {\n  var isReassign = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (isObject(value)) {\n    value['timestamp'] = +new Date();\n\n    if (!isReassign) {\n      var oldStoreData = getStorage(key);\n      value = _objectSpread({}, oldStoreData, {}, value);\n    }\n  }\n\n  store.set(key, value);\n};\n\n/**\r\n * 查找集合索引\r\n * @template T\r\n * @param {TFindDataIndexProps<T>} {\r\n *   data = [],\r\n *   target,\r\n *   key,\r\n * }\r\n */\nexport var findDataIndex = function findDataIndex(_ref) {\n  var _ref$data = _ref.data,\n      data = _ref$data === void 0 ? [] : _ref$data,\n      target = _ref.target,\n      key = _ref.key;\n  return data.findIndex(function (item) {\n    return Object.is(isObject(item) ? item[key] : item, target);\n  });\n};\n/**\r\n * 获取样式\r\n * @param {*} ele\r\n * @returns {CSSStyleDeclaration}\r\n */\n\nexport var getStyle = function getStyle(ele) {\n  if (window.getComputedStyle) {\n    return window.getComputedStyle(ele, null);\n  }\n\n  return ele.currentStyle;\n};\n\n/**\r\n * 对数据进行分页\r\n * @param {*} [query={}]\r\n * @param {*} [data=[]]\r\n * @returns\r\n */\nexport var willDataDoPagination = function willDataDoPagination() {\n  var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref2$query = _ref2.query,\n      query = _ref2$query === void 0 ? {} : _ref2$query,\n      _ref2$data = _ref2.data,\n      data = _ref2$data === void 0 ? [] : _ref2$data;\n\n  var _query$pageIndex = query.pageIndex,\n      pIndex = _query$pageIndex === void 0 ? 1 : _query$pageIndex,\n      _query$pageSize = query.pageSize,\n      pSize = _query$pageSize === void 0 ? DEFAULT_PAGE_SIZE : _query$pageSize;\n  var pageIndex = Math.floor(pIndex);\n  var pageSize = Math.floor(pSize);\n  var totalCount = data.length;\n  data = isArray(data) ? data : [];\n\n  try {\n    if (isNaN(pageIndex) || isNaN(pageSize)) {\n      throw new Error(PARAMS_ERROR);\n    }\n  } catch (error) {\n    return {\n      data: [],\n      totalCount: totalCount,\n      pageTotal: 0,\n      pageSize: DEFAULT_PAGE_SIZE,\n      pageIndex: 1,\n      hasPrevPage: false,\n      hasNextPage: false,\n      error: error\n    };\n  }\n\n  var limitData = [];\n  var totalPage = Math.ceil(totalCount / pageSize);\n  var hasNextPage = pageIndex < totalPage;\n\n  if (hasNextPage || Object.is(pageIndex, totalPage)) {\n    var sliceIndex = (pageIndex - 1) * pageSize;\n    limitData = data.slice(sliceIndex, pageSize * pageIndex);\n  }\n\n  var hasLength = Boolean(totalCount);\n  return {\n    data: limitData,\n    totalCount: totalCount,\n    pageTotal: totalPage,\n    pageSize: pageSize,\n    pageIndex: pageIndex,\n    hasPrevPage: hasLength && pageIndex > 1,\n    hasNextPage: hasLength && hasNextPage\n  };\n};\nexport var paginationAfterData = function paginationAfterData(options) {\n  return new Promise(function (resolve, reject) {\n    var info = willDataDoPagination(options);\n    return info.error ? reject(info.error) : resolve(info);\n  });\n};\nexport var createImage = function createImage() {\n  var option = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _option$width = option.width,\n      width = _option$width === void 0 ? 100 : _option$width,\n      _option$height = option.height,\n      height = _option$height === void 0 ? 200 : _option$height,\n      _option$bgColor = option.bgColor,\n      bgColor = _option$bgColor === void 0 ? Random.color() : _option$bgColor,\n      _option$text = option.text,\n      text = _option$text === void 0 ? Random.word(1) : _option$text;\n  return Random.image(\"\".concat(width, \"x\").concat(height), bgColor, '#fff', text);\n};","map":{"version":3,"sources":["C:/Users/19215/Desktop/liuguanhua.github.io-master/liuguanhua.github.io/src/scripts/utils/index.ts"],"names":["store","isObject","isArray","Random","getWindowWidthHeight","DEFAULT_PAGE_SIZE","PARAMS_ERROR","require","globalSelf","window","global","generateNumList","num","Array","keys","scrollToFixedLocate","scrollHeight","height","scrollTo","top","behavior","isValidArray","data","Boolean","length","getStorage","key","isDefaultEmptyObject","storeData","IS_CLIENT","get","setStorage","value","isReassign","Date","oldStoreData","set","findDataIndex","target","findIndex","item","Object","is","getStyle","ele","getComputedStyle","currentStyle","willDataDoPagination","query","pageIndex","pIndex","pageSize","pSize","Math","floor","totalCount","isNaN","Error","error","pageTotal","hasPrevPage","hasNextPage","limitData","totalPage","ceil","sliceIndex","slice","hasLength","paginationAfterData","options","Promise","resolve","reject","info","createImage","option","width","bgColor","color","text","word","image"],"mappings":"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","sourcesContent":["import store from 'store'\r\nimport { isObject, isArray } from 'util'\r\nimport { Random } from 'mockjs'\r\n\r\nimport { getWindowWidthHeight } from '../helper'\r\nimport { DEFAULT_PAGE_SIZE, PARAMS_ERROR } from '../constant'\r\n\r\nrequire('@root/config')\r\n\r\nexport const globalSelf: Window | NodeJS.Global = (() =>\r\n  typeof window !== 'undefined' ? window : global)()\r\n\r\n/**\r\n * 生成一定长度的数组\r\n * @param {number} [num=0]\r\n */\r\nexport const generateNumList = (num: number = 0) => [...Array(num).keys()]\r\n\r\n/**\r\n * 滚动到具体位置\r\n * @param {number} [scrollHeight=getWindowWidthHeight().height]\r\n */\r\nexport const scrollToFixedLocate = (\r\n  scrollHeight: number = getWindowWidthHeight().height\r\n) => {\r\n  window.scrollTo({\r\n    top: scrollHeight,\r\n    behavior: 'smooth',\r\n  })\r\n}\r\n\r\nexport const isValidArray = (data?: any): boolean =>\r\n  isArray(data) && Boolean(data.length)\r\n\r\nexport const getStorage = (\r\n  key: string,\r\n  isDefaultEmptyObject: boolean = true\r\n) => {\r\n  const storeData = IS_CLIENT ? store.get(key) : {}\r\n  return storeData || (isDefaultEmptyObject ? {} : void 0)\r\n}\r\n\r\nexport const setStorage = <T>(\r\n  key: string,\r\n  value: T,\r\n  isReassign: boolean = false\r\n) => {\r\n  if (isObject(value)) {\r\n    value['timestamp'] = +new Date()\r\n    if (!isReassign) {\r\n      const oldStoreData = getStorage(key)\r\n      value = {\r\n        ...oldStoreData,\r\n        ...value,\r\n      }\r\n    }\r\n  }\r\n  store.set(key, value)\r\n}\r\n\r\ntype TFindDataIndexProps<T> = T extends object\r\n  ? {\r\n      data?: T[]\r\n      target?: any\r\n      key: keyof T\r\n    }\r\n  : {\r\n      data?: any[]\r\n      target?: any\r\n      key?: undefined\r\n    }\r\n\r\n/**\r\n * 查找集合索引\r\n * @template T\r\n * @param {TFindDataIndexProps<T>} {\r\n *   data = [],\r\n *   target,\r\n *   key,\r\n * }\r\n */\r\nexport const findDataIndex = <T>({\r\n  data = [],\r\n  target,\r\n  key,\r\n}: TFindDataIndexProps<T>) =>\r\n  data.findIndex((item) => Object.is(isObject(item) ? item[key] : item, target))\r\n\r\n/**\r\n * 获取样式\r\n * @param {*} ele\r\n * @returns {CSSStyleDeclaration}\r\n */\r\nexport const getStyle = (ele): CSSStyleDeclaration => {\r\n  if (window.getComputedStyle) {\r\n    return window.getComputedStyle(ele, null)\r\n  }\r\n  return ele.currentStyle\r\n}\r\n\r\ninterface IDoPaginationOptionProps {\r\n  query?: { pageIndex?: number; pageSize?: number }\r\n  data?: any[]\r\n}\r\n/**\r\n * 对数据进行分页\r\n * @param {*} [query={}]\r\n * @param {*} [data=[]]\r\n * @returns\r\n */\r\nexport const willDataDoPagination = ({\r\n  query = {},\r\n  data = [],\r\n}: IDoPaginationOptionProps = {}) => {\r\n  const { pageIndex: pIndex = 1, pageSize: pSize = DEFAULT_PAGE_SIZE } = query\r\n  const pageIndex = Math.floor(pIndex)\r\n  const pageSize = Math.floor(pSize)\r\n  const totalCount = data.length\r\n  data = isArray(data) ? data : []\r\n  try {\r\n    if (isNaN(pageIndex) || isNaN(pageSize)) {\r\n      throw new Error(PARAMS_ERROR)\r\n    }\r\n  } catch (error) {\r\n    return {\r\n      data: [],\r\n      totalCount,\r\n      pageTotal: 0,\r\n      pageSize: DEFAULT_PAGE_SIZE,\r\n      pageIndex: 1,\r\n      hasPrevPage: false,\r\n      hasNextPage: false,\r\n      error,\r\n    }\r\n  }\r\n  let limitData: any[] = []\r\n  const totalPage = Math.ceil(totalCount / pageSize)\r\n  const hasNextPage = pageIndex < totalPage\r\n  if (hasNextPage || Object.is(pageIndex, totalPage)) {\r\n    const sliceIndex = (pageIndex - 1) * pageSize\r\n    limitData = data.slice(sliceIndex, pageSize * pageIndex)\r\n  }\r\n  const hasLength = Boolean(totalCount)\r\n  return {\r\n    data: limitData,\r\n    totalCount,\r\n    pageTotal: totalPage,\r\n    pageSize: pageSize,\r\n    pageIndex: pageIndex,\r\n    hasPrevPage: hasLength && pageIndex > 1,\r\n    hasNextPage: hasLength && hasNextPage,\r\n  }\r\n}\r\n\r\nexport const paginationAfterData = (options: IDoPaginationOptionProps) => {\r\n  return new Promise<any>((resolve, reject) => {\r\n    const info = willDataDoPagination(options)\r\n    return info.error ? reject(info.error) : resolve(info)\r\n  })\r\n}\r\n\r\nexport const createImage = (\r\n  option: {\r\n    width?: number\r\n    height?: number\r\n    bgColor?: string\r\n    text?: string\r\n  } = {}\r\n) => {\r\n  const {\r\n    width = 100,\r\n    height = 200,\r\n    bgColor = Random.color(),\r\n    text = Random.word(1),\r\n  } = option\r\n  return Random.image(`${width}x${height}`, bgColor, '#fff', text)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}