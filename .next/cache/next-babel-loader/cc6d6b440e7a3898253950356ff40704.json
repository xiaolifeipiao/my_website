{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport raf from \"raf\";\n\nvar Container = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Container, _PureComponent);\n\n  var _super = _createSuper(Container);\n\n  function Container() {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"events\", [\"resize\", \"scroll\", \"touchstart\", \"touchmove\", \"touchend\", \"pageshow\", \"load\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"subscribers\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"rafHandle\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"subscribe\", function (handler) {\n      _this.subscribers = _this.subscribers.concat(handler);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", function (handler) {\n      _this.subscribers = _this.subscribers.filter(function (current) {\n        return current !== handler;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"notifySubscribers\", function (evt) {\n      if (!_this.framePending) {\n        var currentTarget = evt.currentTarget;\n        _this.rafHandle = raf(function () {\n          _this.framePending = false;\n\n          var _this$node$getBoundin = _this.node.getBoundingClientRect(),\n              top = _this$node$getBoundin.top,\n              bottom = _this$node$getBoundin.bottom;\n\n          _this.subscribers.forEach(function (handler) {\n            return handler({\n              distanceFromTop: top,\n              distanceFromBottom: bottom,\n              eventSource: currentTarget === window ? document.body : _this.node\n            });\n          });\n        });\n        _this.framePending = true;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getParent\", function () {\n      return _this.node;\n    });\n\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return {\n        subscribe: this.subscribe,\n        unsubscribe: this.unsubscribe,\n        getParent: this.getParent\n      };\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return window.addEventListener(event, _this2.notifySubscribers);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this3 = this;\n\n      if (this.rafHandle) {\n        raf.cancel(this.rafHandle);\n        this.rafHandle = null;\n      }\n\n      this.events.forEach(function (event) {\n        return window.removeEventListener(event, _this3.notifySubscribers);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return __jsx(\"div\", _extends({}, this.props, {\n        ref: function ref(node) {\n          return _this4.node = node;\n        },\n        onScroll: this.notifySubscribers,\n        onTouchStart: this.notifySubscribers,\n        onTouchMove: this.notifySubscribers,\n        onTouchEnd: this.notifySubscribers\n      }));\n    }\n  }]);\n\n  return Container;\n}(PureComponent);\n\n_defineProperty(Container, \"childContextTypes\", {\n  subscribe: PropTypes.func,\n  unsubscribe: PropTypes.func,\n  getParent: PropTypes.func\n});\n\nexport { Container as default };","map":null,"metadata":{},"sourceType":"module"}