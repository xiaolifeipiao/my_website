{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\19215\\\\Desktop\\\\liuguanhua.github.io-master\\\\liuguanhua.github.io\\\\src\\\\components\\\\react-sticky\\\\Container.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport raf from \"raf\";\nexport default class Container extends PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"events\", [\"resize\", \"scroll\", \"touchstart\", \"touchmove\", \"touchend\", \"pageshow\", \"load\"]);\n\n    _defineProperty(this, \"subscribers\", []);\n\n    _defineProperty(this, \"rafHandle\", null);\n\n    _defineProperty(this, \"subscribe\", handler => {\n      this.subscribers = this.subscribers.concat(handler);\n    });\n\n    _defineProperty(this, \"unsubscribe\", handler => {\n      this.subscribers = this.subscribers.filter(current => current !== handler);\n    });\n\n    _defineProperty(this, \"notifySubscribers\", evt => {\n      if (!this.framePending) {\n        const {\n          currentTarget\n        } = evt;\n        this.rafHandle = raf(() => {\n          this.framePending = false;\n          const {\n            top,\n            bottom\n          } = this.node.getBoundingClientRect();\n          this.subscribers.forEach(handler => handler({\n            distanceFromTop: top,\n            distanceFromBottom: bottom,\n            eventSource: currentTarget === window ? document.body : this.node\n          }));\n        });\n        this.framePending = true;\n      }\n    });\n\n    _defineProperty(this, \"getParent\", () => this.node);\n  }\n\n  getChildContext() {\n    return {\n      subscribe: this.subscribe,\n      unsubscribe: this.unsubscribe,\n      getParent: this.getParent\n    };\n  }\n\n  componentDidMount() {\n    this.events.forEach(event => window.addEventListener(event, this.notifySubscribers));\n  }\n\n  componentWillUnmount() {\n    if (this.rafHandle) {\n      raf.cancel(this.rafHandle);\n      this.rafHandle = null;\n    }\n\n    this.events.forEach(event => window.removeEventListener(event, this.notifySubscribers));\n  }\n\n  render() {\n    return __jsx(\"div\", _extends({}, this.props, {\n      ref: node => this.node = node,\n      onScroll: this.notifySubscribers,\n      onTouchStart: this.notifySubscribers,\n      onTouchMove: this.notifySubscribers,\n      onTouchEnd: this.notifySubscribers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }));\n  }\n\n}\n\n_defineProperty(Container, \"childContextTypes\", {\n  subscribe: PropTypes.func,\n  unsubscribe: PropTypes.func,\n  getParent: PropTypes.func\n});","map":{"version":3,"sources":["C:/Users/19215/Desktop/liuguanhua.github.io-master/liuguanhua.github.io/src/components/react-sticky/Container.js"],"names":["React","PureComponent","PropTypes","raf","Container","handler","subscribers","concat","filter","current","evt","framePending","currentTarget","rafHandle","top","bottom","node","getBoundingClientRect","forEach","distanceFromTop","distanceFromBottom","eventSource","window","document","body","getChildContext","subscribe","unsubscribe","getParent","componentDidMount","events","event","addEventListener","notifySubscribers","componentWillUnmount","cancel","removeEventListener","render","props","func"],"mappings":"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","sourcesContent":["import React, { PureComponent } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport raf from \"raf\";\r\n\r\nexport default class Container extends PureComponent {\r\n  static childContextTypes = {\r\n    subscribe: PropTypes.func,\r\n    unsubscribe: PropTypes.func,\r\n    getParent: PropTypes.func\r\n  };\r\n\r\n  getChildContext() {\r\n    return {\r\n      subscribe: this.subscribe,\r\n      unsubscribe: this.unsubscribe,\r\n      getParent: this.getParent\r\n    };\r\n  }\r\n\r\n  events = [\r\n    \"resize\",\r\n    \"scroll\",\r\n    \"touchstart\",\r\n    \"touchmove\",\r\n    \"touchend\",\r\n    \"pageshow\",\r\n    \"load\"\r\n  ];\r\n\r\n  subscribers = [];\r\n\r\n  rafHandle = null;\r\n\r\n  subscribe = handler => {\r\n    this.subscribers = this.subscribers.concat(handler);\r\n  };\r\n\r\n  unsubscribe = handler => {\r\n    this.subscribers = this.subscribers.filter(current => current !== handler);\r\n  };\r\n\r\n  notifySubscribers = evt => {\r\n    if (!this.framePending) {\r\n      const { currentTarget } = evt;\r\n\r\n      this.rafHandle = raf(() => {\r\n        this.framePending = false;\r\n        const { top, bottom } = this.node.getBoundingClientRect();\r\n\r\n        this.subscribers.forEach(handler =>\r\n          handler({\r\n            distanceFromTop: top,\r\n            distanceFromBottom: bottom,\r\n            eventSource: currentTarget === window ? document.body : this.node\r\n          })\r\n        );\r\n      });\r\n      this.framePending = true;\r\n    }\r\n  };\r\n\r\n  getParent = () => this.node;\r\n\r\n  componentDidMount() {\r\n    this.events.forEach(event =>\r\n      window.addEventListener(event, this.notifySubscribers)\r\n    );\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.rafHandle) {\r\n      raf.cancel(this.rafHandle);\r\n      this.rafHandle = null;\r\n    }\r\n\r\n    this.events.forEach(event =>\r\n      window.removeEventListener(event, this.notifySubscribers)\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        {...this.props}\r\n        ref={node => (this.node = node)}\r\n        onScroll={this.notifySubscribers}\r\n        onTouchStart={this.notifySubscribers}\r\n        onTouchMove={this.notifySubscribers}\r\n        onTouchEnd={this.notifySubscribers}\r\n      />\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}